(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{56175:function(e,t,l){Promise.resolve().then(l.bind(l,21791))},21791:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return e3}});var s=l(57437),a=l(2265),n=l(13786),r=l(69668),o=l(97230),i=l(5674),c=l(12649),d=l(99418),x=l.n(d),u=l(3634),m=l.n(u),f=l(43506),g=l.n(f),p=l(74989),b=l.n(p);let h={Inter:x(),Plus_Jakarta_Sans:m(),Open_Sans:g(),PT_Mono:b()},v=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/generate_stream")},j=e=>{let t=e||document.activeElement;t&&t instanceof HTMLElement&&t.blur()},w=()=>{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/import_files")};var N=e=>{let{title:t="",key:l="Button"+t,Icon:a,onClick:n=()=>{},onMouseEnter:r=()=>{},onMouseLeave:o=()=>{},disabled:i=!1,className:c="",text_class_name:d="",selected:x=!1,selected_color:u="bg-button-oxtari",selected_text_color:m="text-text-oxtari-button",text_size:f="text-xs",icon_size:g=12,type:p="button",loading:b=!1,circle:h=!1,onClickParams:v=[]}=e;return(0,s.jsx)("button",{type:p,className:c+" p-3 transition-all active:scale-95 scale-100 duration-300 flex gap-1 items-center justify-center ".concat(h?"rounded-full":"rounded-lg"," hover:bg-button-hover-oxtari hover:text-text-oxtari-button ").concat(x?u+" shadow-md "+m:" bg-button-oxtari text-text-alt-oxtari-button"," "),onClick:e=>n(e,...v),disabled:i,onMouseEnter:r,onMouseLeave:o,children:b?(0,s.jsx)("span",{className:"text-text-oxtari-button loading loading-spinner loading-xs"}):(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(a,{size:g,className:"w-[20px]"}),t&&(0,s.jsx)("p",{title:t,className:f+" "+d,children:t})]})},l)},y=e=>{let{Icon:t,title:l,currentPage:a,setPage:n,setCurrentPage:r,hide:o}=e;return(0,s.jsx)(N,{title:l,Icon:t,selected_color:"bg-primary-oxtari",selected:a===n,onClick:()=>{r(n)},disabled:o})};async function _(){try{let e=await fetch("https://api.github.com/repos/weaviate/oxtari",{method:"GET"}),t=await e.json();if(t)return t.stargazers_count;return 0}catch(e){return console.error("Failed to perform search:",e),0}}let S=e=>e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString();var C=e=>{let{imageSrc:t,title:l,subtitle:n,currentPage:d,setCurrentPage:x,production:u}=e,[m,f]=(0,a.useState)("0");return(0,a.useEffect)(()=>{(async()=>{try{let e=await _();if(e){let t=S(e);f(t)}}catch(e){console.error("Failed to fetch GitHub stars:",e)}})()},[]),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-10",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[(0,s.jsx)("img",{src:t,className:"flex rounded-lg w-[60px] object-contain [filter:drop-shadow(0_4px_3px_rgb(0_0_0_/0.07))_drop-shadow(0_2px_2px_rgb(0_0_0_/0.06))]"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-text-oxtari",children:l}),(0,s.jsx)("p",{className:"text-sm  text-text-alt-oxtari font-light",children:n})]}),(0,s.jsx)("div",{className:"flex md:hidden flex-col items-center gap-3 justify-between",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)(N,{Icon:c.QQh,title:"Menu"}),(0,s.jsxs)("ul",{tabIndex:0,className:"dropdown-content dropdown-left z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"CHAT"===d?"font-bold":"",onClick:()=>{x("CHAT"),j()},children:"Chat"})},"Menu Button1"),(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"DOCUMENTS"===d?"font-bold":"",onClick:()=>{x("DOCUMENTS"),j()},children:"Documents"})},"Menu Button2"),"Demo"!=u&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"ADD"===d?"font-bold":"",onClick:()=>{x("ADD"),j()},children:"Import Data"})},"Menu Button4"),"Demo"!=u&&(0,s.jsx)("li",{children:(0,s.jsx)("a",{className:"SETTINGS"===d?"font-bold":"",onClick:()=>{x("SETTINGS"),j()},children:"Settings"})},"Menu Button5")]})]})})]}),(0,s.jsx)("div",{className:"flex flex-row justify-center items-center",children:(0,s.jsxs)("div",{className:"hidden md:flex flex-row items-center gap-3 justify-between",children:[(0,s.jsx)(y,{hide:!1,Icon:r.utr,title:"Chat",currentPage:d,setCurrentPage:x,setPage:"CHAT"}),"Demo"!=u&&(0,s.jsx)(y,{hide:!1,Icon:o.Lgw,title:"Import Data",currentPage:d,setCurrentPage:x,setPage:"ADD"}),(0,s.jsx)(y,{hide:!1,Icon:r.emU,title:"Documents",currentPage:d,setCurrentPage:x,setPage:"DOCUMENTS"}),"Demo"!=u&&(0,s.jsx)(y,{hide:!1,Icon:r.zfW,title:"Settings",currentPage:d,setCurrentPage:x,setPage:"SETTINGS"}),(0,s.jsx)("div",{className:"sm:h-[3vh] lg:h-[5vh] mx-1 hidden md:block bg-text-alt-oxtari w-px"}),(0,s.jsx)(N,{title:m,Icon:i.hJX,onClick:()=>{window.open("https://github.com/weaviate/oxtari","_blank","noopener,noreferrer")},className:"flex-grow",icon_size:14,disabled:!1,selected:!1})]})})]})};let k=async e=>{try{return(await fetch(e)).ok}catch(t){return console.error("Failed to fetch from ".concat(e,":"),t),!1}},I=async()=>await k("http://localhost:8000/api/health")?"http://localhost:8000":await k("/api/health")?window.location.origin:"http://localhost:8000",E=async e=>{try{let t=await I(),l=await fetch("".concat(t).concat(e),{method:"GET"}),s=await l.json();return s||console.warn("Could not retrieve data from ".concat(e)),s}catch(t){return console.error("Failed to fetch data from ".concat(e,":"),t),null}},R=()=>E("/api/health"),D=async(e,t,l,s)=>{let a=await I(),n=await fetch("".concat(a,"/api/connect"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:{deployment:e,url:t,key:l},port:s})});return await n.json()},O=async e=>{try{let t=await I(),l=await fetch("".concat(t,"/api/get_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving content",e),null}},A=async(e,t)=>{if(!e)return!1;try{let l=await I(),s=await fetch("".concat(l,"/api/set_rag_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rag_config:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error setting config:",e),!1}},T=async(e,t,l)=>{try{let s=await I(),a=await fetch("".concat(s,"/api/set_theme_config"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themes:e,theme:t,credentials:l})});return 200===a.status}catch(e){return console.error("Error setting config:",e),!1}},M=async(e,t,l,s,a)=>{try{let n=await I(),r=await fetch("".concat(n,"/api/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,RAG:t,labels:l,documentFilter:s,credentials:a})});return await r.json()}catch(e){return console.error("Error sending query",e),null}},F=async(e,t)=>{if(!e)return null;try{let l=await I(),s=await fetch("".concat(l,"/api/get_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return await s.json()}catch(e){return console.error("Error retrieving selected document",e),null}},L=async(e,t,l)=>{try{let s=await I(),a=await fetch("".concat(s,"/api/get_datacount"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embedding_model:e,documentFilter:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},P=async e=>{try{let t=await I(),l=await fetch("".concat(t,"/api/get_labels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving content",e),null}},z=async(e,t,l,s)=>{if(!e)return null;try{let a=await I(),n=await fetch("".concat(a,"/api/get_content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,chunkScores:l,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},G=async(e,t,l)=>{if(!e)return null;try{let s=await I(),a=await fetch("".concat(s,"/api/get_vectors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,showAll:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},J=async(e,t,l,s)=>{if(!e)return null;try{let a=await I(),n=await fetch("".concat(a,"/api/get_chunks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,page:t,pageSize:l,credentials:s})});return await n.json()}catch(e){return console.error("Error retrieving content",e),null}},W=async(e,t,l)=>{if(!e)return null;try{let s=await I(),a=await fetch("".concat(s,"/api/get_chunk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,embedder:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving content",e),null}},U=async(e,t,l,s,a)=>{try{let n=await I(),r=await fetch("".concat(n,"/api/get_all_documents"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,labels:t,page:l,pageSize:s,credentials:a})});return await r.json()}catch(e){return console.error("Error retrieving all documents",e),null}},B=async(e,t)=>{try{let l=await I(),s=await fetch("".concat(l,"/api/delete_document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting document",e),!1}},V=async(e,t)=>{try{let l=await I(),s=await fetch("".concat(l,"/api/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetMode:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting all documents",e),!1}},q=async e=>{try{let t=await I(),l=await fetch("".concat(t,"/api/get_meta"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await l.json()}catch(e){return console.error("Error retrieving selected document",e),null}},H=async(e,t,l)=>{try{let s=await I(),a=await fetch("".concat(s,"/api/get_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,limit:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving suggestions",e),null}},Y=async(e,t)=>{try{let l=await I(),s=await fetch("".concat(l,"/api/delete_suggestion"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:e,credentials:t})});return 200===s.status}catch(e){return console.error("Error deleting suggestion",e),!1}},K=async(e,t,l)=>{try{let s=await I(),a=await fetch("".concat(s,"/api/get_all_suggestions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:e,pageSize:t,credentials:l})});return await a.json()}catch(e){return console.error("Error retrieving all suggestions",e),null}};var X=l(77763),Z=e=>{let{tooltip_text:t,display_text:l}=e,[n,r]=(0,a.useState)(!1);return(0,s.jsx)("div",{className:"items-center gap-2 flex",children:(0,s.jsxs)("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"relative cursor-pointer flex flex-col items-center text-text-alt-oxtari",children:[(0,s.jsx)("p",{className:"text-sm ml-3",children:l}),(0,s.jsx)("div",{className:"absolute top-full left-full mt-2 z-30 p-4 bg-bg-oxtari text-text-alt-oxtari text-xs rounded-xl shadow-md w-[300px] transition-opacity duration-300 ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),children:(0,s.jsx)("p",{className:"w-full text-xs whitespace-normal",children:t})})]})})},$=e=>{let{title:t,modal_id:l,text:a,triggerAccept:n,triggerString:r,triggerValue:o}=e;return(0,s.jsx)("dialog",{id:l,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box flex flex-col gap-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:t}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:a}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsxs)("form",{method:"dialog",className:"flex gap-2",children:[n&&r&&(0,s.jsx)(N,{type:"submit",title:r,onClick:()=>{n(o)}}),(0,s.jsx)(N,{type:"submit",title:"Cancel",selected_color:"bg-warning-oxtari",selected:!0})]})})]})})},Q=e=>{let{selectedDocument:t,setSelectedDocument:l,production:n,addStatusMessage:r,credentials:c}=e,[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)([]),[p,b]=(0,a.useState)(0),[h,v]=(0,a.useState)([]),[j,w]=(0,a.useState)([]),[y,_]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),k=async e=>{try{C(!0);let t=await U(e||"",j,u,50,c);t&&(""!==t.error?(console.error(t.error),C(!1),g(null),b(0)):(g(t.documents),v(t.labels),C(!1),b(t.totalDocuments)))}catch(e){console.error("Failed to fetch document:",e),C(!1)}};(0,a.useEffect)(()=>{_(!0)},[]),(0,a.useEffect)(()=>{k(d)},[u,y,j]);let I=()=>{k(d)},E=async e=>{if("Demo"==n)return;let s=await B(e,c);r("Deleted document","WARNING"),s&&(e==t&&l(null),k(d))},R=e=>{w(t=>t.filter(t=>t!==e))},D=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden lg:flex gap-2 justify-start w-[8vw]",children:(0,s.jsx)(Z,{tooltip_text:"Search and inspect different documents imported into Oxtari",display_text:"Search"})}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},placeholder:"Search for documents (".concat(p,")"),value:d,onChange:e=>{x(e.target.value)}})}),(0,s.jsx)(N,{onClick:I,Icon:i.U41}),(0,s.jsx)(N,{onClick:()=>{x(""),w([]),k("")},icon_size:20,Icon:X.Ffb})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex flex-col p-6 gap-3 items-center h-full w-full overflow-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col w-full justify-start gap-2",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(N,{title:"Label",className:"btn-sm min-w-min",icon_size:12,text_class_name:"text-xs",Icon:o.Lgw,selected:!1,disabled:!1})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:h.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{j.includes(e)||w([...j,e]);let t=document.activeElement;t.blur();let l=t.closest(".dropdown");l&&l.blur()},children:e})},"Label"+t))})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map((e,t)=>(0,s.jsx)(N,{title:e,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-primary-oxtari",selected:!0,text_class_name:"truncate max-w-[200px]",text_size:"text-xs",onClick:()=>{R(e)}},"FilterDocumentLabel"+t))})]}),S&&(0,s.jsx)("div",{className:"flex items-center justify-center gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm text-text-alt-oxtari"})}),(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[f&&f.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-center gap-2 rounded-2xl p-1 w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center w-full gap-2",children:[(0,s.jsx)(N,{title:e.title,selected:t==e.uuid,selected_color:"bg-secondary-oxtari",className:"flex-grow",text_class_name:"truncate max-w-[150px] lg:max-w-[350px]",onClick:()=>l(e.uuid)},e.title+a),"Demo"!==n&&(0,s.jsx)(N,{Icon:i.Xm5,selected:t==e.uuid,selected_color:"bg-warning-oxtari",className:"max-w-min",onClick:()=>{D("remove_document"+e.uuid)}},e.title+a+"delete")]}),(0,s.jsx)($,{modal_id:"remove_document"+e.uuid,title:"Remove Document",text:"Do you want to remove "+e.title+"?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:E})]},"Document"+a+e.title))," "]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-4 items-center justify-center h-min w-full",children:(0,s.jsx)("div",{className:"join justify-center items-center text-text-oxtari",children:(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 bg-bg-alt-oxtari",children:[(0,s.jsx)(N,{title:"Previous Page",onClick:()=>{f&&(1==u?m(Math.ceil(p/50)):m(e=>e-1))},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.O18}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-xs text-text-oxtari",children:["Page ",u]})}),(0,s.jsx)(N,{title:"Next Page",onClick:()=>{f&&(50*u<p?m(e=>e+1):m(1))},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.Rdr})]})})})]})},ee=l(29563),et=l(21783),el=l(92521),es=l(11538),ea=l(44725),en=l(51448),er=l(49270);let eo=["green","blue","red","yellow","purple","cyan","orange","limegreen","pink","teal","violet","forestgreen","gold","navy","magenta","mediumspringgreen","darkorange","deepskyblue","crimson","lightseagreen","royalblue","chartreuse","mediumorchid","aqua","orangered","mediumaquamarine","plum","lime","dodgerblue","lightcoral","mediumslateblue","lightgreen","darkred","springgreen","lightpink","indigo","lightyellow","mediumvioletred","seagreen","fuchsia","darkseagreen","thistle","orange","powderblue","yellowgreen","cornflowerblue","darkmagenta","darkblue","gold","mediumblue","rosybrown","darkgreen","lightskyblue","mediumseagreen","firebrick","lavender","darkcyan","khaki","mediumturquoise","saddlebrown","lightblue","olive","mintcream","turquoise","rebeccapurple","lightgoldenrodyellow"];function ei(e,t,l){return l===t?0:(e-t)/(l-t)}(0,ee.e)({OrbitControls:el.z});let ec=e=>{let{vector:t,color:l,setHoverTitle:n,documentTitle:r,multiplication:o,dynamicColor:i,chunk_id:c,chunk_uuid:d,setSelectedChunk:x,selectedChunk:u,minX:m,maxX:f,minY:g,maxY:p,minZ:b,maxZ:h,chunkScores:v}=e,j=(0,a.useRef)(null),w=(0,a.useRef)(!1),N=(0,a.useMemo)(()=>null==v?void 0:v.some(e=>e.uuid===d),[v,d]),y=(0,a.useMemo)(()=>N?new en.Color("yellow"):u===d?new en.Color("green"):i?function(e,t,l,s,a,n,r){let o=ei(e.x,t,l),i=ei(e.y,s,a),c=ei(e.z,n,r);return new en.Color("rgb(".concat(Math.floor(255*o),",").concat(Math.floor(255*i),",").concat(Math.floor(255*c),")"))}(t,m,f,g,p,b,h):new en.Color(l),[N,u,d,i,l,t,m,f,g,p,b,h]),_=N?3:u===d?1.5:1,S=N?1:w.current?1:.5,C=(0,a.useCallback)(()=>{w.current=!0,n.current("".concat(r," | ").concat(c))},[r,c,n]),k=(0,a.useCallback)(()=>{w.current=!1,n.current(null)},[n]),I=(0,a.useCallback)(()=>{x(d)},[d,x]);return(0,ee.C)(()=>{if(j.current){j.current.position.lerp(new en.Vector3(t.x*o,t.y*o,t.z*o),.02);let e=j.current.material;e.color.set(w.current?"blue":y),e.opacity=w.current?1:S,e.transparent=!w.current}}),(0,s.jsx)(es.b,{rotationIntensity:.2,children:(0,s.jsxs)("mesh",{ref:j,position:[0,0,0],onPointerEnter:C,onPointerLeave:k,onClick:I,children:[(0,s.jsx)("sphereGeometry",{args:[_,32,32]}),(0,s.jsx)("meshBasicMaterial",{color:y,opacity:S,transparent:!0})]})})};var ed=e=>{let{credentials:t,selectedDocument:l,production:n,chunkScores:r}=e;(0,a.useRef)([]);let[o,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(""),[m,f]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!0),[b,h]=(0,a.useState)(null),v=(0,a.useRef)(e=>h(e)),[j,w]=(0,a.useState)(200),[N,y]=(0,a.useState)(0),[_,S]=(0,a.useState)(null),[C,k]=(0,a.useState)(null),[I,E]=(0,a.useState)(-1),[R,D]=(0,a.useState)(1),[O,A]=(0,a.useState)(-1),[T,M]=(0,a.useState)(1),[F,L]=(0,a.useState)(-1),[P,z]=(0,a.useState)(1);function J(e){return{min:Math.min(...e),max:Math.max(...e)}}(0,a.useEffect)(()=>{l?B():d([])},[m,l]),(0,a.useEffect)(()=>{_?U():k(null)},[_]);let U=async()=>{try{let e=await W(_,x,t);e&&(""!==e.error?(console.error(e.error),k(null)):k(e.chunk))}catch(e){console.error("Failed to fetch document:",e),i(!1)}},B=async()=>{try{i(!0);let e=await G(l,m,t);if(e){if(""!==e.error)console.error(e.error),i(!1),d([]),y(0),u("None");else if(d(e.vector_groups.groups),u(e.vector_groups.embedder),y(e.vector_groups.dimensions),i(!1),!m){let t=e.vector_groups.groups[0].chunks.map(e=>e.vector.x),l=e.vector_groups.groups[0].chunks.map(e=>e.vector.y),s=e.vector_groups.groups[0].chunks.map(e=>e.vector.z),{min:a,max:n}=J(t);E(a),D(n);let{min:r,max:o}=J(l);A(r),M(o);let{min:i,max:c}=J(s);L(i),z(c)}}}catch(e){console.error("Failed to fetch document:",e),i(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 h-full w-full",children:[(0,s.jsx)("div",{className:"flex justify-end w-full gap-2 items-center",children:(0,s.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[o&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-alt-oxtari gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-xs lg:loading-sm"})}),(0,s.jsx)("p",{className:"text-text-alt-oxtari text-xs lg:text-sm font-bold",children:"Embedding Model:"}),(0,s.jsx)("p",{className:"text-text-alt-oxtari text-xs lg:text-sm",children:x})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-xs lg:text-sm font-bold",children:"Hover:"}),(0,s.jsx)("p",{className:"text-xs lg:text-sm text-text-alt-oxtari truncate max-w-[100px] lg:max-w-[300px]",title:null!=b?b:"",children:null!=b?b:""})]}),(0,s.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-xs lg:text-sm font-bold",children:"Vectors:"}),(0,s.jsxs)("p",{className:"text-xs lg:text-sm text-text-alt-oxtari",children:[c.length," x ",(()=>{let e=0;for(let t of c)e+=t.chunks.length;return e})()," x ",N]})]})]}),(0,s.jsxs)("div",{className:"flex gap-10 items-center justify-between min-w-[20vw]",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:["Demo"!=n&&(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-oxtari",children:"Show All Documents"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:m,onChange:e=>{f(e.target.checked)}})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-text-alt-oxtari",children:"Dynamic Coloring"}),(0,s.jsx)("input",{type:"checkbox",className:"toggle",checked:g,onChange:e=>{p(e.target.checked)}})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex w-full justify-start items-center",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:!0,className:"btn btn-sm bg-button-oxtari hover:bg-button-hover-oxtari text-text-oxtari w-full flex justify-start border-none",children:[(0,s.jsx)(er.WMq,{size:15}),(0,s.jsx)("p",{children:"PCA"})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm",children:"Zoom"}),(0,s.jsx)("input",{onChange:e=>{w(Number(e.target.value))},type:"range",min:0,max:"1000",value:j,className:"range range-xs grow w-full"})]})]}),C&&(0,s.jsx)("button",{onClick:()=>{k(null),S(null)},className:"flex btn btn-square border-none text-text-oxtari bg-button-oxtari hover:bg-warning-oxtari gap-2",children:(0,s.jsx)(X.B4e,{size:15})})]})]})}),(0,s.jsxs)("div",{className:"flex gap-5 h-[45vh] w-full",children:[(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(_?"w-2/3":"w-full"," h-full"),children:(0,s.jsxs)(et.Xz,{children:[(0,s.jsx)("ambientLight",{intensity:1}),(0,s.jsx)(el.z,{}),(0,s.jsx)(ea.c,{makeDefault:!0,position:[0,0,150]}),(0,s.jsx)("axesHelper",{args:[50]}),c.map((e,t)=>e.chunks.map((l,a)=>(0,s.jsx)(ec,{dynamicColor:g,multiplication:j,vector:l.vector,color:function(e){if(!(e>=eo.length))return eo[e];{let e=Math.floor(Math.random()*eo.length);return eo[e]}}(t),setHoverTitle:v,documentTitle:e.name,chunk_id:l.chunk_id,setSelectedChunk:S,selectedChunk:_,chunk_uuid:l.uuid,minX:I,minY:O,minZ:F,maxX:R,maxY:T,maxZ:P,chunkScores:r},"Sphere_"+a+e.name)))]})}),(0,s.jsx)("div",{className:"flex flex-grow transition-all duration-300 ease-in-out ".concat(_?"w-1/3 opacity-100":"w-0 opacity-0"," overflow-auto"),children:C&&(0,s.jsxs)("div",{className:"flex flex-col p-3 gap-2 w-full",children:[(0,s.jsxs)("p",{className:"text-text-alt-oxtari fond-bold",children:["Chunk ",C.chunk_id]}),(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm",children:C.content})]})})]})]})},ex=l(29549),eu=l(76857),em=l(92619),ef=e=>{let{selectedDocument:t,credentials:l,selectedTheme:n}=e,[o,c]=(0,a.useState)(!1),[d,x]=(0,a.useState)([]),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)(0),[p,b]=(0,a.useState)(!0);(0,a.useEffect)(()=>{j(u),b(1===u&&0===f)},[u,f]),(0,a.useEffect)(()=>{j(1),g(0),b(1===u&&0===f)},[t]);let h=async()=>{f===d.length-1?(await j(u+1)?m(e=>e+1):(await j(1),m(1)),g(0)):g(e=>e+1)},v=async()=>{if(0===f){if(u>1){let e=u-1;await j(e)&&(m(e),g(9))}else{let e=u,t=!0;for(;t;)(t=await j(e+1))&&e++;await j(e),m(e),g(d.length-1)}}else g(e=>e-1)},j=async e=>{try{c(!0);let s=await J(t,e,10,l);if(s){if(""===s.error)return x(s.chunks),c(!1),s.chunks.length>0;console.error(s.error),c(!1),x([])}return!1}catch(e){return console.error("Failed to fetch document:",e),c(!1),!1}};return 0==d.length?(0,s.jsx)("div",{children:o&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-oxtari gap-2 h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})})}):(0,s.jsx)("div",{className:"flex flex-col h-full",children:d.length>0&&(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"flex-grow overflow-hidden p-3",children:[(0,s.jsx)("div",{className:"flex justify-between mb-2",children:(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-oxtari rounded-full w-fit",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-oxtari",children:["Chunk ",d[f].chunk_id]})]})})}),(0,s.jsx)("div",{className:"overflow-y-auto h-[calc(100%-3rem)]",children:(0,s.jsx)(ex.D,{className:"max-w-[50vw] items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-oxtari",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:d[f].content})})]}),d.length>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-oxtari",children:[(0,s.jsx)(N,{title:"Previous Chunk",onClick:v,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",disabled:p,Icon:i.O18}),(0,s.jsx)(N,{title:"Next Chunk",onClick:h,className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.Rdr})]})]})})},eg=e=>{let{selectedDocument:t,credentials:l}=e,[n,r]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[t]);let c=async()=>{try{r(!0);let e=await F(t,l);e&&(""!==e.error?i(null):i(e.document),r(!1))}catch(e){console.error("Failed to fetch document:",e),r(!1)}};return(0,s.jsx)("div",{className:"flex flex-col h-full",children:n?(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-md text-text-oxtari bg-text-alt-oxtari"})}):o&&(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"Title"}),(0,s.jsx)("p",{className:"text-text-oxtari truncate max-w-full",title:o.title,children:o.title})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"Metadata"}),(0,s.jsx)("p",{className:"text-text-oxtari max-w-full",children:o.metadata})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"Extension"}),(0,s.jsx)("p",{className:"text-text-oxtari max-w-full",children:o.extension})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"File Size"}),(0,s.jsx)("p",{className:"text-text-oxtari max-w-full",children:o.fileSize})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"Source"}),(0,s.jsx)("button",{className:"text-text-oxtari truncate max-w-full",onClick:()=>window.open(o.source,"_blank"),title:o.source,children:o.source})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-2 items-start justify-start",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:"Labels"}),(0,s.jsx)("p",{className:"text-text-oxtari max-w-full",children:o.labels})]})]})})},ep=l(70476),eb=l(22561),eh=e=>{let{document:t,selectedDocument:l,selectedTheme:n,credentials:o,chunkScores:c}=e,[d,x]=(0,a.useState)(!0),[u,m]=(0,a.useState)(1),[f,g]=(0,a.useState)(1),[p,b]=(0,a.useState)([]),h=(0,a.useRef)(null);(0,a.useEffect)(()=>{t?(v(),m(1)):(b([]),m(1),g(1))},[t,c]),(0,a.useEffect)(()=>{t?v():(b([]),m(1),g(1))},[u]),(0,a.useEffect)(()=>{if(c&&c.length>0){var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}},[p,c]);let v=async()=>{try{x(!0);let e=await z(l,u,c||[],o);e&&(""!==e.error?(b([{content:e.error,chunk_id:0,score:0,type:"text"}]),m(1),g(1)):(b(e.content),g(e.maxPage)),x(!1))}catch(e){console.error("Failed to fetch content from document:",e),x(!1)}},j=(e,t)=>"text"===e.type?(0,s.jsx)("div",{className:"flex p-2",ref:c?null:h,children:(0,s.jsx)(ex.D,{className:"max-w-[50vw] items-center justify-center flex-wrap prose-sm p-3 prose-pre:bg-bg-alt-oxtari",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:e.content})},"CONTENT_SNIPPET"+t):(0,s.jsxs)("div",{className:"flex p-2 border-2 flex-col gap-2 border-secondary-oxtari shadow-lg rounded-3xl",ref:h,children:[(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-oxtari rounded-full w-fit",children:[(0,s.jsx)(eb.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-oxtari",children:"Context Used"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-secondary-oxtari rounded-full w-fit",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsxs)("p",{className:"text-xs flex text-text-oxtari",children:["Chunk ",e.chunk_id+1]})]}),e.score>0&&(0,s.jsxs)("div",{className:"flex gap-2 items-center p-3 bg-primary-oxtari rounded-full w-fit",children:[(0,s.jsx)(eb.dvR,{size:12}),(0,s.jsx)("p",{className:"text-xs flex text-text-oxtari",children:"High Relevancy"})]})]})}),(0,s.jsx)(ex.D,{className:"w-full items-center justify-center flex-wrap md:prose-base sm:prose-sm p-3 prose-pre:bg-bg-alt-oxtari",components:{code(e){let{node:t,inline:l,className:a,children:r,...o}=e,i=/language-(\w+)/.exec(a||"");return!l&&i?(0,s.jsx)(eu.Z,{style:"dark"===n.theme?em.vk:em.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:a,...o,children:r})}},children:e.content})]});return t?(0,s.jsx)("div",{className:"flex flex-col h-full",children:t&&(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari flex flex-col rounded-lg overflow-hidden h-full",children:[(0,s.jsx)("div",{className:"p-3 bg-bg-alt-oxtari",children:(0,s.jsxs)("div",{className:"flex gap-4 w-full justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[d&&(0,s.jsx)("div",{className:"flex items-center justify-center text-text-oxtari gap-2",children:(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})}),(0,s.jsx)("p",{className:"text-lg font-bold truncate max-w-[350px]",title:t.title,children:t.title})]}),(0,s.jsx)("div",{className:"gap-2 flex flex-wrap",children:Object.entries(t.labels).map(e=>{let[l,a]=e;return(0,s.jsx)(N,{title:a,text_size:"text-xs",text_class_name:"truncate max-w-[200px]",className:"btn-sm min-w-min max-w-[200px]"},t.title+l+a)})})]})}),(0,s.jsx)("div",{className:"flex-grow overflow-hidden p-3",children:(0,s.jsx)("div",{className:"overflow-y-auto h-full",children:p&&p.map((e,t)=>j(e,t))})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-oxtari",children:[(0,s.jsx)(N,{title:"Previous "+(c?"Chunk":"Page"),onClick:()=>{1==u?m(f):m(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.O18}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("p",{className:"text-xs text-text-oxtari",children:[c?"Chunk ":"Page "," ",u]})}),(0,s.jsx)(N,{title:"Next "+(c?"Chunk":"Page"),onClick:()=>{u==f?m(1):m(e=>e+1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.Rdr})]})]})}):(0,s.jsx)("div",{})},ev=e=>{let{credentials:t,selectedDocument:l,setSelectedDocument:n,chunkScores:r,production:c,selectedTheme:d,documentFilter:x,setDocumentFilter:u,addStatusMessage:m}=e,[f,g]=(0,a.useState)("Content"),[p,b]=(0,a.useState)(!1),[h,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{l?w():v(null)},[l]);let j=e=>{window.open(e,"_blank","noopener,noreferrer")},w=async()=>{try{b(!0);let e=await F(l,t);e&&(""!==e.error?(console.error(e.error),b(!1),v(null),n(null)):(v(e.document),b(!1)))}catch(e){console.error("Failed to fetch document:",e),b(!1)}};return l?(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-end lg:justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,s.jsx)(Z,{tooltip_text:"Inspect your all information about your document, such as chunks, metadata and more.",display_text:h?h.title:"Loading..."})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(N,{title:"Content",Icon:X.Vqr,onClick:()=>g("Content"),selected:"Content"===f,selected_color:"bg-secondary-oxtari"}),(0,s.jsx)(N,{title:"Chunks",Icon:X.Fqs,onClick:()=>g("Chunks"),selected:"Chunks"===f,selected_color:"bg-secondary-oxtari"}),(0,s.jsx)(N,{title:"Vector",Icon:ep.FUn,onClick:()=>g("Vector Space"),selected:"Vector Space"===f,selected_color:"bg-secondary-oxtari"}),(0,s.jsx)(N,{Icon:X.B4e,onClick:()=>{n(null)}})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["Content"===f&&(0,s.jsx)(eh,{selectedTheme:d,document:h,credentials:t,selectedDocument:l,chunkScores:r}),"Chunks"===f&&(0,s.jsx)(ef,{selectedTheme:d,credentials:t,selectedDocument:l}),"Vector Space"===f&&(0,s.jsx)(ed,{credentials:t,selectedDocument:l,chunkScores:r,production:c}),"Metadata"===f&&(0,s.jsx)(eg,{credentials:t,selectedDocument:l})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[x.some(e=>e.uuid===l)&&(0,s.jsx)(N,{title:"Delete from Chat",Icon:X.B4e,selected:!0,selected_color:"bg-warning-oxtari",onClick:()=>{u(x.filter(e=>e.uuid!==l)),m("Removed document from Chat","INFO")}}),!x.some(e=>e.uuid===l)&&h&&(0,s.jsx)(N,{title:"Add to Chat",Icon:o.Lgw,onClick:()=>{u([...x,{uuid:l,title:h.title}]),m("Added document to Chat","SUCCESS")}})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[l&&h&&h.source&&(0,s.jsx)(N,{title:"Go To Source",Icon:i.CkN,onClick:()=>{j(h.source)}}),(0,s.jsx)(N,{title:"Document Info",Icon:i.DAO,onClick:()=>g("Metadata"),selected:"Metadata"===f,selected_color:"bg-secondary-oxtari"})]})]})]}):(0,s.jsx)("div",{})},ej=e=>{let{selectedTheme:t,production:l,credentials:n,documentFilter:r,setDocumentFilter:o,addStatusMessage:i}=e,[c,d]=(0,a.useState)(null);return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,s.jsx)(Q,{production:l,addStatusMessage:i,setSelectedDocument:d,credentials:n,selectedDocument:c})}),(0,s.jsx)("div",{className:"".concat(c?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:(0,s.jsx)(ev,{production:l,credentials:n,addStatusMessage:i,setSelectedDocument:d,selectedTheme:t,selectedDocument:c,documentFilter:r,setDocumentFilter:o})})]})};let ew={DONE:"bg-secondary-oxtari",ERROR:"bg-warning-oxtari",READY:"bg-button-oxtari",STARTING:"bg-button-oxtari",CHUNKING:"bg-button-oxtari",LOADING:"bg-button-oxtari",EMBEDDING:"bg-button-oxtari",INGESTING:"bg-button-oxtari",NER:"bg-button-oxtari",EXTRACTION:"bg-button-oxtari",SUMMARIZING:"bg-button-oxtari",WAITING:"bg-button-oxtari"},eN={DONE:"Finished",ERROR:"Failed",READY:"Ready",STARTING:"Importing...",CHUNKING:"Chunking...",LOADING:"Loading...",EMBEDDING:"Embedding...",INGESTING:"Weaviating...",NER:"Extracting NER...",EXTRACTION:"Extraction REL...",SUMMARIZING:"Summarizing...",WAITING:"Uploading..."},ey={theme_name:"Light",title:{text:"RAG Assistant",type:"text",description:"Title"},subtitle:{text:"Your AI Assistant",type:"text",description:"Subtitle"},intro_message:{text:"Welcome to your AI Assistant, your personal RAG application!",type:"text",description:"First Message"},image:{src:"/verba2.png",type:"image",description:"Logo"},primary_color:{color:"#023eba",type:"color",description:"Primary"},secondary_color:{color:"#000000",type:"color",description:"Secondary"},warning_color:{color:"#023eba",type:"color",description:"Warning"},bg_color:{color:"#ffffff",type:"color",description:"Background"},bg_alt_color:{color:"#ffffff",type:"color",description:"Alt. Background"},text_color:{color:"#000000",type:"color",description:"Text"},text_alt_color:{color:"#023eba",type:"color",description:"Alt. Text"},button_text_color:{color:"#000000",type:"color",description:"Button Text"},button_text_alt_color:{color:"#ffffff",type:"color",description:"Button Alt. Text"},button_color:{color:"#ffffff",type:"color",description:"Button"},button_hover_color:{color:"#023eba",type:"color",description:"Button Hover"},font:{value:"Amiri",type:"select",options:["Amiri","Georgia_Pro_Condensed","Inter","Plus_Jakarta_Sans","Open_Sans","PT_Mono"],description:"Text Font"},theme:"light"},e_={...ey,theme_name:"Dark",title:{...ey.title,text:"RAG Assistant"},subtitle:{...ey.subtitle,text:"Your AI Assistant"},intro_message:{...ey.intro_message,text:"Welcome to your AI Assistant, your personal RAG application!"},image:{...ey.image,src:"/verba2.png"},primary_color:{...ey.primary_color,color:"#023eba"},secondary_color:{...ey.secondary_color,color:"#ffffff"},warning_color:{...ey.warning_color,color:"#023eba"},bg_color:{...ey.bg_color,color:"#000000"},bg_alt_color:{...ey.bg_alt_color,color:"#023eba"},text_color:{...ey.text_color,color:"#ffffff"},text_alt_color:{...ey.text_alt_color,color:"#ffffff"},button_text_color:{...ey.button_text_color,color:"#ffffff"},button_text_alt_color:{...ey.button_text_alt_color,color:"#000000"},button_color:{...ey.button_color,color:"#023eba"},button_hover_color:{...ey.button_hover_color,color:"#ffffff"},font:{...ey.font,value:"Amiri"},theme:"dark"},eS={...ey,theme_name:"WCD",title:{...ey.title,text:"Oxtari"},subtitle:{...ey.subtitle,text:"Weaviate Chatbot"},intro_message:{...ey.intro_message,text:"Welcome to Oxtari, your open-source RAG application!"},image:{...ey.image,src:"/verba2.png"},primary_color:{...ey.primary_color,color:"#BF40C5"},secondary_color:{...ey.secondary_color,color:"#28395B"},warning_color:{...ey.warning_color,color:"#EA3A31"},bg_color:{...ey.bg_color,color:"#0C1428"},bg_alt_color:{...ey.bg_alt_color,color:"#192136"},text_color:{...ey.text_color,color:"#ffffff"},text_alt_color:{...ey.text_alt_color,color:"#AAAAAA"},button_text_color:{...ey.button_text_color,color:"#ffffff"},button_text_alt_color:{...ey.button_text_alt_color,color:"#AAAAAA"},button_color:{...ey.button_color,color:"#1D253A"},button_hover_color:{...ey.button_hover_color,color:"#313749"},font:{...ey.font,value:"Open_Sans"},theme:"dark"},eC={...ey,theme_name:"Weaviate",title:{...ey.title,text:"Oxtari"},subtitle:{...ey.subtitle,text:"Weaviate Chatbot"},intro_message:{...ey.intro_message,text:"Welcome to Oxtari, your open-source RAG application!"},image:{...ey.image,src:"/verba2.png"},primary_color:{...ey.primary_color,color:"#9bfc88"},secondary_color:{...ey.secondary_color,color:"#8bffe7"},warning_color:{...ey.warning_color,color:"#f77579"},bg_color:{...ey.bg_color,color:"#FEF7F7"},bg_alt_color:{...ey.bg_alt_color,color:"#ffffff"},text_color:{...ey.text_color,color:"#130C49"},text_alt_color:{...ey.text_alt_color,color:"#929292"},button_text_color:{...ey.button_text_color,color:"#130C49"},button_text_alt_color:{...ey.button_text_alt_color,color:"#929292"},button_color:{...ey.button_color,color:"#eeeeee"},button_hover_color:{...ey.button_hover_color,color:"#7dfffb"},font:{...ey.font,value:"Plus_Jakarta_Sans"},theme:"light"};var ek=e=>{let{fileData:t,fileMap:l,handleDeleteFile:a,selectedFileData:n,setSelectedFileData:r}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:["READY"!=l[t.fileID].status?(0,s.jsxs)("div",{className:"flex gap-2",children:["DONE"!=l[t.fileID].status&&"ERROR"!=l[t.fileID].status&&(0,s.jsx)(N,{title:eN[l[t.fileID].status],className:"w-[120px]"}),"DONE"==l[t.fileID].status&&(0,s.jsx)(N,{title:eN[l[t.fileID].status],Icon:i.FJM,selected:!0,className:"w-[120px]",selected_color:"bg-secondary-oxtari"}),"ERROR"==l[t.fileID].status&&(0,s.jsx)(N,{title:eN[l[t.fileID].status],Icon:X.vVM,className:"w-[120px]",selected:!0,selected_color:"bg-warning-oxtari"})]}):(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(N,{title:l[t.fileID].rag_config.Reader.selected,className:"w-[120px]",text_class_name:"truncate w-[100px]"})}),(0,s.jsx)(N,{title:l[t.fileID].filename?l[t.fileID].filename:"No Filename",selected:n===l[t.fileID].fileID,selected_color:"bg-secondary-oxtari",className:"flex-grow",text_class_name:"truncate max-w-[150px] lg:max-w-[300px]",onClick:()=>{r(t.fileID)}}),(0,s.jsx)(N,{Icon:i.Xm5,onClick:()=>{let e=document.getElementById("remove_file_"+l[t.fileID].filename);e instanceof HTMLDialogElement&&e.showModal()},className:"w-[50px]",selected:n===l[t.fileID].fileID,selected_color:"bg-warning-oxtari"}),(0,s.jsx)($,{modal_id:"remove_file_"+l[t.fileID].filename,title:"Remove File",text:l[t.fileID].isURL?"Do you want to remove the URL?":"Do you want to remove "+l[t.fileID].filename+" from the selection?",triggerString:"Delete",triggerValue:l[t.fileID].fileID,triggerAccept:a})]})},eI=e=>{let{fileMap:t,setFileMap:l,RAGConfig:n,addStatusMessage:r,setRAGConfig:c,selectedFileData:d,setSelectedFileData:x,importSelected:u,socketStatus:m,reconnect:f,importAll:g}=e,p=a.useRef(null);(0,a.useEffect)(()=>{null!==p.current&&(p.current.setAttribute("directory",""),p.current.setAttribute("webkitdirectory",""))},[p]);let b=e=>{l(t=>{if(null===e)return r("Cleared all files","WARNING"),x(null),{};{e===d&&x(null),r("Cleared selected file","WARNING");let l={...t};return delete l[e],l}})},[h,v]=(0,a.useState)(null),[w,y]=(0,a.useState)(null),_=async(e,s)=>{if(e.target.files&&n){let a=e.target.files,o={...t},i=s?w:h;r("Added new files","SUCCESS");for(let e=0;e<a.length;e++){let t=a[e],l=JSON.parse(JSON.stringify(n));i&&(l.Reader.selected=i);let s=t.name,r=t.name;if(r in o){let e=Date.now();r="".concat(r,"_").concat(e)}let c=t.name.split(".").pop()||"",d=await function(e){return new Promise((t,l)=>{let s=new FileReader;s.onload=()=>{t(function(e){let t="",l=new Uint8Array(e),s=l.byteLength;for(let e=0;e<s;e++)t+=String.fromCharCode(l[e]);return btoa(t)}(s.result))},s.onerror=()=>l(s.error),s.readAsArrayBuffer(e)})}(t);o[r]={fileID:r,filename:s,extension:c,status_report:{},source:"",isURL:!1,metadata:"",overwrite:!1,content:d,labels:["Document"],rag_config:l,file_size:C(d),status:"READY"}}l(o),x(Object.keys(o)[0]),e.target.value=""}},S=e=>{if(n){let s={...t},a=JSON.parse(JSON.stringify(n));a.Reader.selected=e;let o=new Date().toISOString();r("Added new URL Job","SUCCESS"),s[o]={fileID:o,filename:"New "+e+" Job",metadata:"",status_report:{},extension:"URL",isURL:!0,source:"",overwrite:!1,content:"",labels:["Document"],rag_config:a,file_size:0,status:"READY"},l(s),x(o)}},C=e=>{let t=e.replace(/\s+/g,"");if(t.length%2!=0)throw Error("Invalid hex string length.");return t.length/2};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-end lg:justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden lg:flex gap-2 justify-start ",children:(0,s.jsx)(Z,{tooltip_text:"Upload your data through this interface into Oxtari. You can select individual files, directories or add URL to fetch data from.",display_text:"File Selection"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-center lg:justify-end",children:[(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(N,{title:"Files",Icon:o.Lgw,onClick:()=>{var e;return null===(e=document.getElementById("files_upload"))||void 0===e?void 0:e.click()}})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"!==l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;v(l.name),null===(e=document.getElementById("files_upload"))||void 0===e||e.click(),j()},children:(0,s.jsx)("a",{children:l.name})},"File_"+l.name+t)})})]}),(0,s.jsx)("input",{id:"files_upload",type:"file",onChange:e=>_(e,!1),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(N,{title:"Directory",Icon:er.Lec})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"!==l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{var e;y(l.name),null===(e=document.getElementById("dir_upload"))||void 0===e||e.click(),j()},children:(0,s.jsx)("a",{children:l.name})},"Dir_"+l.name+t)})})]}),(0,s.jsx)("input",{id:"dir_upload",type:"file",ref:p,onChange:e=>_(e,!0),className:"hidden",multiple:!0}),(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(N,{title:"URL",Icon:o.Lgw})}),(0,s.jsx)("input",{id:"url_upload",type:"file",className:"hidden"}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow",children:n&&Object.entries(n.Reader.components).filter(e=>{let[t,l]=e;return"URL"===l.type}).map(e=>{let[t,l]=e;return(0,s.jsx)("li",{onClick:()=>{S(l.name),j()},children:(0,s.jsx)("a",{children:l.name})},"URL_"+l.name+t)})})]})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex flex-col gap-3 p-6 items-center justify-start h-full w-full overflow-auto",children:Object.entries(t).map(e=>{let[l,a]=e;return(0,s.jsx)(ek,{fileData:a,handleDeleteFile:b,selectedFileData:d,setSelectedFileData:x,fileMap:t},"FileComponent_"+l)})}),"ONLINE"===m?(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 justify-end",children:[d&&(0,s.jsx)(N,{title:"Import Selected",Icon:i.Xur,onClick:u}),(0,s.jsx)(N,{title:"Import All",Icon:i.Xur,onClick:g}),(0,s.jsx)(N,{title:"Clear Files",Icon:X.B4e,onClick:()=>{let e=document.getElementById("remove_all_files");e instanceof HTMLDialogElement&&e.showModal()}})]})}):(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-end h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-3 justify-end",children:(0,s.jsxs)("button",{onClick:f,className:"flex btn border-none text-text-oxtari bg-button-oxtari hover:bg-button-hover-oxtari gap-2 items-center",children:[(0,s.jsx)(ep.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})}),(0,s.jsx)($,{modal_id:"remove_all_files",title:"Clear all files?",text:"Do you want to clear all files from your selection?",triggerString:"Clear All",triggerValue:null,triggerAccept:b})]})},eE=l(13629),eR=l(45983);let eD=e=>{let{values:t,config_title:l,updateConfig:n,component_name:o,blocked:c}=e,[d,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(t);(0,a.useEffect)(()=>{n(o,l,u)},[u]);let f=e=>{u.includes(e)||(m(t=>[...t,e]),x(""))},g=e=>{u.includes(e)&&m(t=>t.filter(t=>t!==e))};return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between",children:[(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",disabled:c,value:d,onChange:e=>{x(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f(d))}})}),(0,s.jsxs)("button",{onClick:()=>{f(d)},disabled:c,className:"btn flex gap-2 bg-button-oxtari border-none hover:bg-secondary-oxtari text-text-oxtari",children:[(0,s.jsx)(r.Kth,{size:15}),(0,s.jsx)("p",{children:"Add"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"flex bg-bg-oxtari w-full p-2 text-center text-sm text-text-oxtari justify-between items-center rounded-xl",children:[(0,s.jsx)("div",{className:"flex w-full justify-center items-center overflow-hidden",children:(0,s.jsx)("p",{className:"truncate",title:e,children:e})}),(0,s.jsx)("button",{disabled:c,onClick:()=>{g(e)},className:"btn btn-sm btn-square bg-button-oxtari border-none hover:bg-warning-oxtari text-text-oxtari ml-2",children:(0,s.jsx)(i.Xm5,{size:12})})]},e+t))})]})};var eO=e=>{let{RAGConfig:t,component_name:l,selectComponent:a,updateConfig:n,saveComponentConfig:r,blocked:o,skip_component:i}=e;return 0==Object.entries(t[l].components[t[l].selected].config).length&&i?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"divider text-text-alt-oxtari flex-grow text-xs lg:text-sm",children:[(0,s.jsxs)("p",{children:[t[l].selected," Settings"]}),(0,s.jsx)(N,{title:"Save",onClick:()=>{r(l,t[l].selected,t[l].components[t[l].selected])}})]})}),!i&&(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw] lg:text-base text-sm",children:l}),(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:o,className:"btn bg-button-oxtari hover:bg-button-hover-oxtari text-text-oxtari w-full flex justify-start border-none",children:[(0,s.jsx)(er.WMq,{size:15}),(0,s.jsx)("p",{children:t[l].selected})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 rounded-box z-[1] w-full p-2 shadow",children:Object.entries(t[l].components).filter(e=>{let[t,l]=e;return l.available}).map(e=>{let[t,n]=e;return(0,s.jsx)("li",{onClick:()=>{o||(a(l,n.name),j())},children:(0,s.jsx)("a",{children:n.name})},"ComponentDropdown_"+n.name)})})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-oxtari text-start",children:t[l].components[t[l].selected].description})]})]}),Object.entries(t[l].components[t[l].selected].config).map(e=>{let[a,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-oxtari lg:text-base text-sm",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:a}),"dropdown"===r.type&&(0,s.jsxs)("div",{className:"dropdown dropdown-bottom flex justify-start items-center w-full",children:[(0,s.jsxs)("button",{tabIndex:0,role:"button",disabled:o,className:"btn bg-button-oxtari hover:bg-button-hover-oxtari text-text-oxtari w-full flex justify-start border-none",children:[(0,s.jsx)(er.WMq,{size:15}),(0,s.jsx)("p",{children:r.value})]}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content menu bg-base-100 max-h-[20vh] overflow-auto rounded-box z-[1] w-full p-2 shadow",children:t[l].components[t[l].selected].config[a].values.map(e=>(0,s.jsx)("li",{className:"text-sm",onClick:()=>{o||(n(l,a,e),j())},children:(0,s.jsx)("a",{children:e})},"ConfigValue"+e))})]}),"boolean"!=typeof r.value&&["text","number","password"].includes(r.type)&&(0,s.jsx)("label",{className:"input flex text-sm items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:r.type,className:"grow w-full",value:r.value,onChange:e=>{o||n(l,a,e.target.value)}})}),"boolean"!=typeof r.value&&["textarea"].includes(r.type)&&(0,s.jsx)("textarea",{className:"grow w-full text-sm min-h-[152px] bg-bg-oxtari rounded-lg p-2",value:r.value,onChange:e=>{o||n(l,a,e.target.value)}}),"boolean"!=typeof r.value&&"multi"==r.type&&(0,s.jsx)(eD,{component_name:l,values:r.values,config_title:a,updateConfig:n,blocked:o}),"bool"==r.type&&(0,s.jsxs)("div",{className:"flex gap-5 justify-start items-center w-full my-4",children:[(0,s.jsx)("p",{className:"lg:text-sm text-xs text-text-alt-oxtari text-start w-[250px]",children:r.description}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>{o||n(l,a,e.target.checked)},checked:"boolean"==typeof r.value&&r.value})]})]}),"bool"!=r.type&&(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari mt-3",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-xs text-text-alt-oxtari text-start",children:r.description})]})]},"Configuration"+a+l)})]})},eA=e=>{var t;let{selectedFileData:l,fileMap:n,selectComponent:o,updateConfig:c,saveComponentConfig:d,setFileMap:x,blocked:u,addStatusMessage:m}=e,[f,g]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),[j,w]=(0,a.useState)("");(0,a.useEffect)(()=>{l&&(g(n[l].filename),b(n[l].source),v(n[l].metadata))},[n,l]);let y=(0,a.useCallback)((e,t)=>{if(l){let s=JSON.parse(JSON.stringify(n[l]));s[e]=t;let a={...n};a[l]=s,x(a)}},[l,n,x]),_=(0,a.useCallback)(e=>{let t=e.target.value;g(t),y("filename",t)},[y]),S=(0,a.useCallback)(e=>{let t=e.target.value;b(t),y("source",t)},[y]),C=(0,a.useCallback)(e=>{let t=e.target.value;v(t),y("metadata",t)},[y]),k=e=>{if(l){let t=JSON.parse(JSON.stringify(n[l]));t.overwrite=e;let s={...n};s[l]=t,x(s)}},I=e=>{if(l&&!n[l].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[l]));t.labels.push(e);let s={...n};s[l]=t,x(s),w("")}},E=e=>{if(l&&n[l].labels.includes(e)&&e.length>0){let t=JSON.parse(JSON.stringify(n[l]));t.labels=t.labels.filter(t=>t!==e);let s={...n};s[l]=t,x(s),w("")}};return l?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl p-1 w-full ",children:[l&&"READY"!=n[l].status&&(0,s.jsx)("div",{className:"divider  text-text-alt-oxtari",children:"Import Status"}),(0,s.jsx)("div",{className:"flex flex-col gap-3 text-text-oxtari",children:l&&Object.entries(n[l].status_report).map(e=>{let[t,l]=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("p",{className:"flex min-w-[8vw] gap-2 items-center text-text-oxtari",children:["DONE"===l.status&&(0,s.jsx)(i.FJM,{size:15}),"ERROR"===l.status&&(0,s.jsx)(X.vVM,{size:15}),eN[l.status]]}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full ".concat(ew[l.status]," bg-bg-oxtari"),children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:0!=l.took?l.message+" ("+l.took+"s)":l.message,disabled:!0})})]},"Status"+t)})}),(0,s.jsx)(eO,{RAGConfig:n[l].rag_config,component_name:"Reader",selectComponent:o,updateConfig:c,skip_component:!0,saveComponentConfig:d,blocked:n[l].block}),(0,s.jsx)("div",{className:"divider text-text-alt-oxtari",children:"File Settings"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Title"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:f,onChange:_,disabled:u})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:"Add a Title to the document. If you are adding a URL, all URL will have a have their corresponding URL as filename."})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Source Link"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:p,onChange:S,disabled:u})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:"Add a link to reference the original source of the document. You can access it through the Document Explorer via the View Source button"})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Labels"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:j,onChange:e=>{w(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),I(j))},disabled:u,title:j})}),(0,s.jsx)(N,{title:"Add",Icon:r.Kth,onClick:()=>{I(j)},disabled:u})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:"Add or remove labels for Document Filtering"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries((t=n[l]).labels).map(e=>{let[l,a]=e;return(0,s.jsx)("div",{children:(0,s.jsx)(N,{title:a,className:"btn-sm",text_class_name:"text-xs",onClick:()=>{E(a)},Icon:X.B4e})},t.fileID+l+a)})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Overwrite"}),(0,s.jsx)("input",{type:"checkbox",className:"checkbox checkbox-md",onChange:e=>k(e.target.checked),checked:!!l&&n[l].overwrite,disabled:u})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:"Overwrite existing documents with the same name."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-oxtari",children:"Metadata"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Metadata"}),(0,s.jsx)("textarea",{className:"grow w-full textarea flex items-center gap-2 max-h-64 bg-bg-oxtari",value:h,onChange:C,disabled:u})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:"Add metadata to the document to improve retrieval and generation. Metadata will added to the context sent to the embedding and generation, to influcence the results."})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-oxtari",children:"File Information"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Extension"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].extension,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"File Size"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:(e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/Math.pow(1024,t)).toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(n[l].file_size),disabled:!0})})]}),(0,s.jsx)("div",{className:"divider  text-text-alt-oxtari",children:"Ingestion Pipeline"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Reader"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Reader.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:l&&n[l].rag_config.Reader.components[n[l].rag_config.Reader.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Chunker"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Chunker.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:l&&n[l].rag_config.Chunker.components[n[l].rag_config.Chunker.selected].description})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Embedder"}),(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",value:n[l].rag_config.Embedder.selected,disabled:!0})})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]"}),(0,s.jsx)("p",{className:"text-sm text-text-alt-oxtari text-start",children:l&&n[l].rag_config.Embedder.components[n[l].rag_config.Embedder.selected].description})]}),(0,s.jsx)("div",{className:"divider"}),(0,s.jsxs)("div",{className:"flex gap-2 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:"Debug"}),(0,s.jsx)(N,{Icon:eR.ZWp,onClick:()=>{let e=document.getElementById("File_Debug_Modal");e instanceof HTMLDialogElement&&e.showModal()},className:"max-w-min"})]}),(0,s.jsx)("dialog",{id:"File_Debug_Modal",className:"modal",children:(0,s.jsxs)("div",{className:"modal-box min-w-fit",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Debugging File Configuration"}),(0,s.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:l?(()=>{let e={...n[l]};return e.content="File Content",JSON.stringify(e,null,2)})():""}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn text-text-oxtari bg-warning-oxtari border-none hover:bg-button-hover-oxtari ml-2",children:"Close"})})})]})})]}):(0,s.jsx)("div",{})},eT=e=>{var t;let{selectedFileData:l,fileMap:n,addStatusMessage:o,setFileMap:c,RAGConfig:d,setRAGConfig:x,setSelectedFileData:u,credentials:m}=e,[f,g]=(0,a.useState)("Basic"),p=async()=>{o("Setting current config as default","SUCCESS"),l&&(await A(n[l].rag_config,m)?x(n[l].rag_config):console.error("Failed to set RAG config:"))},b=(0,a.useCallback)((e,t,s)=>{c(a=>{if(l){let n={...a},r=n[l],o=r.rag_config[e].components[r.rag_config[e].selected].config;return"string"==typeof s||"boolean"==typeof s?o[t].value=s:o[t].values=s,n}return a})},[l]),h=(e,t)=>{c(s=>{if(l){let a=JSON.parse(JSON.stringify(s[l])),n=JSON.parse(JSON.stringify(s[l].rag_config));n[e].selected=t,a.rag_config=n;let r={...s};return r[l]=a,r}return s})},v=(0,a.useCallback)(async(e,t,l)=>{if(!d)return;o("Saving "+t+" config","SUCCESS");let s=JSON.parse(JSON.stringify(d));s[e].selected=t,s[e].components[t]=l,await A(s,m)&&x(s)},[d,m]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-6 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(Z,{tooltip_text:"Configure all import settings related to chunking, embedding, adding meta data and more. You can save made changes individually or apply them to all other files",display_text:"Import Config"})}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(N,{title:"Overview",selected:"Basic"===f,selected_color:"bg-secondary-oxtari",onClick:()=>{g("Basic")},Icon:r.zfW}),(0,s.jsx)(N,{title:"Config",selected:"Pipeline"===f,selected_color:"bg-secondary-oxtari",onClick:()=>{g("Pipeline")},Icon:i.KOq}),(0,s.jsx)(N,{onClick:()=>{u(null)},Icon:X.B4e})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex flex-col p-6 items-center h-full w-full overflow-auto",children:["Basic"===f&&(0,s.jsx)(eA,{selectedFileData:l,addStatusMessage:o,fileMap:n,selectComponent:h,updateConfig:b,saveComponentConfig:v,setFileMap:c,blocked:l?null!==(t=n[l].block)&&void 0!==t&&t:void 0}),"Pipeline"===f&&l&&(0,s.jsxs)("div",{className:"flex flex-col gap-10 w-full",children:[(0,s.jsx)(eO,{RAGConfig:n[l].rag_config,component_name:"Chunker",selectComponent:h,updateConfig:b,saveComponentConfig:v,blocked:n[l].block,skip_component:!1}),(0,s.jsx)(eO,{RAGConfig:n[l].rag_config,component_name:"Embedder",selectComponent:h,updateConfig:b,saveComponentConfig:v,blocked:n[l].block,skip_component:!1})]})]}),(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)(N,{title:"Apply to All",onClick:()=>{let e=document.getElementById("apply_setting_to_all");e instanceof HTMLDialogElement&&e.showModal()},Icon:eE.HL_}),(0,s.jsx)(N,{title:"Save Config",onClick:()=>{let e=document.getElementById("set_default_settings");e instanceof HTMLDialogElement&&e.showModal()},Icon:r.zfW}),(0,s.jsx)(N,{title:"Reset",onClick:()=>{let e=document.getElementById("reset_Setting");e instanceof HTMLDialogElement&&e.showModal()},Icon:X.B4e})]})}),(0,s.jsx)($,{modal_id:"apply_setting_to_all",title:"Apply Pipeline Settings",text:"Apply Pipeline Settings to all files?",triggerString:"Apply",triggerValue:null,triggerAccept:()=>{o("Applying config to all files","INFO"),c(e=>{if(l){let t=JSON.parse(JSON.stringify(e[l].rag_config)),s={...e};for(let a in e){let n=JSON.parse(JSON.stringify(e[a]));n.rag_config=t,n.source=e[l].source,n.labels=e[l].labels,n.overwrite=e[l].overwrite,s[a]=n}return s}return e})}}),(0,s.jsx)($,{modal_id:"reset_Setting",title:"Reset Setting",text:"Reset pipeline settings of this file?",triggerString:"Reset",triggerValue:null,triggerAccept:()=>{o("Resetting pipeline settings","WARNING"),c(e=>{if(l&&d){let t={...e},s=JSON.parse(JSON.stringify(e[l]));return s.rag_config=d,t[l]=s,t}return e})}}),(0,s.jsx)($,{modal_id:"set_default_settings",title:"Set Default",text:"Set current pipeline settings as default for future files?",triggerString:"Set",triggerValue:null,triggerAccept:p})]})},eM=e=>{let{credentials:t,RAGConfig:l,setRAGConfig:n,addStatusMessage:r}=e,[o,i]=(0,a.useState)({}),[c,d]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[g,p]=(0,a.useState)("OFFLINE");(0,a.useEffect)(()=>{u(!0)},[]),(0,a.useEffect)(()=>{let e=w(),t=new WebSocket(e);return t.onopen=()=>{console.log("Import WebSocket connection opened to "+e),p("ONLINE")},t.onmessage=e=>{p("ONLINE");try{let t=JSON.parse(e.data);"new_file_id"in t?i(e=>{let l={...e};return l[t.new_file_id]={...l[t.original_file_id],fileID:t.new_file_id,filename:t.filename,block:!0},l}):h(t)}catch(t){console.error("Received data is not valid JSON:",e.data);return}},t.onerror=e=>{console.error("Import WebSocket Error:",e),p("OFFLINE"),b(),u(e=>!e)},t.onclose=e=>{p("OFFLINE"),b(),e.wasClean?console.log("Import WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),u(e=>!e)},f(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[x]);let b=()=>{i(e=>{if(o){let t={...e};for(let e in t)"DONE"!=t[e].status&&"ERROR"!=t[e].status&&"READY"!=t[e].status&&(t[e].status="ERROR",t[e].status_report.ERROR={fileID:e,status:"ERROR",message:"Connection was interrupted",took:0});return t}return e})},h=e=>{"DONE"===e.status&&r("File "+e.fileID+" imported","SUCCESS"),"ERROR"===e.status&&r("File "+e.fileID+" import failed","ERROR"),i(t=>{if(e&&e.fileID in t){let l=JSON.parse(JSON.stringify(t[e.fileID])),s={...t};return l.status=e.status,l.status_report[e.status]=e,s[e.fileID]=l,s}return t})},v=e=>{i(t=>{if(e in t){let l=JSON.parse(JSON.stringify(t[e])),s={...t};return l.status="WAITING",Object.entries(l.status_report).length>0&&(l.status_report={}),s[e]=l,s}return t})},j=(e,l)=>{if((null==m?void 0:m.readyState)===WebSocket.OPEN){v(l);let s=[],a=0;for(;a<e.length;){let t=e.slice(a,a+2e3);s.push(t),a+=2e3}let n=s.length;s.forEach((e,s)=>{m.send(JSON.stringify({chunk:e,isLastChunk:s===n-1,total:n,order:s,fileID:l,credentials:t}))})}else console.error("WebSocket is not open. ReadyState:",null==m?void 0:m.readyState),u(e=>!e)};return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(c?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,s.jsx)(eI,{fileMap:o,addStatusMessage:r,setFileMap:i,RAGConfig:l,setRAGConfig:n,selectedFileData:c,setSelectedFileData:d,importSelected:()=>{r("Importing selected file","INFO"),c&&["READY","DONE","ERROR"].includes(o[c].status)&&!o[c].block&&j(JSON.stringify(o[c]),c)},importAll:()=>{for(let e in r("Importing all files","INFO"),o)["READY","DONE","ERROR"].includes(o[e].status)&&!o[e].block&&j(JSON.stringify(o[e]),e)},socketStatus:g,reconnect:()=>{u(e=>!e)}})}),(0,s.jsx)("div",{className:"".concat(c?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:c&&(0,s.jsx)(eT,{addStatusMessage:r,selectedFileData:c,RAGConfig:l,credentials:t,setRAGConfig:n,fileMap:o,setFileMap:i,setSelectedFileData:d})})]})},eF=l(33145),eL=l(56321),eP=e=>{let{credentials:t,setCredentials:l,setSelectedTheme:n,setThemes:r,setIsLoggedIn:o,production:c,setRAGConfig:d}=e,[x,u]=(0,a.useState)(!0),[m,f]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!0),[b,h]=(0,a.useState)(""),[v,j]=(0,a.useState)("Local"),[w,y]=(0,a.useState)(t.url),[_,S]=(0,a.useState)(t.key),[C,k]=(0,a.useState)("8080");(0,a.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>{t.default_deployment&&(j(t.default_deployment),I(t.default_deployment))},[t]);let I=async e=>{h(""),f(!0);let s=await D(e,w,_,C);s&&("error"in s?!1==s.connected?(o(!1),h(""==s.error?"Couldn't connect to Weaviate":s.error)):(o(!0),l({deployment:e,key:_,url:w,default_deployment:t.default_deployment}),d(s.rag_config),s.themes&&r(s.themes),s.theme&&n(s.theme)):(o(!1),h(JSON.stringify(s)))),f(!1)};return(0,s.jsx)("div",{className:"w-screen h-screen bg-white",children:(0,s.jsxs)("div",{className:"flex w-full h-full transition-opacity duration-1000 ".concat(x?"opacity-0":"opacity-100"),children:[(0,s.jsx)("div",{className:"hidden md:flex md:w-1/2 lg:w-3/5 h-full items-center justify-center bg-gray-50",children:(0,s.jsx)(eF.default,{src:"/verba2.png",alt:"Logo",width:400,height:400,className:"max-w-md max-h-md object-contain"})}),(0,s.jsx)("div",{className:"w-full md:flex md:w-1/2 lg:w-2/5 h-full flex justify-center items-center p-5",children:(0,s.jsxs)("div",{className:"flex flex-col gap-8 items-center md:items-start justify-center w-4/5",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center md:items-start gap-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)("p",{className:"font-light text-3xl md:text-4xl text-text-alt-oxtari",children:"Welcome to"})}),"Local"==c&&(0,s.jsx)("p",{className:"text-text-oxtari text-base lg:text-lg ",children:"Choose your deployment"})]}),g?(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-4 w-full",children:["Local"==c&&(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,s.jsx)(N,{Icon:i.i1q,title:"Weaviate",disabled:m,onClick:()=>{p(!1),j("Weaviate")}}),(0,s.jsx)(N,{title:"Docker",Icon:i.X2n,disabled:m,onClick:()=>{j("Docker"),I("Docker")},loading:m&&"Docker"==v}),(0,s.jsx)(N,{title:"Custom",Icon:ep.Y6Z,disabled:m,onClick:()=>{j("Custom"),p(!1)},loading:m&&"Custom"==v}),(0,s.jsx)(N,{title:"Local",Icon:i.bHw,disabled:m,onClick:()=>{j("Local"),I("Local")},loading:m&&"Local"==v})]}),"Demo"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)(N,{Icon:eb.drw,title:"Start Demo",disabled:m,onClick:()=>{j("Weaviate"),I("Weaviate")},loading:m&&"Weaviate"==v})}),"Production"==c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsx)(N,{Icon:eb.drw,title:"Start Application",onClick:()=>{p(!1),j("Weaviate")}})})]}):(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:"Demo"!=c&&(0,s.jsx)("div",{className:"flex flex-col justify-start gap-4 w-full",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I(v)},children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md w-full bg-bg-oxtari",children:[(0,s.jsx)(i.i1q,{className:"text-text-alt-oxtari"}),(0,s.jsx)("input",{type:"text",name:"username",value:w,onChange:e=>y(e.target.value),placeholder:"Weaviate URL",className:"grow bg-button-oxtari text-text-alt-oxtari hover:text-text-oxtari w-full",autoComplete:"username"})]}),"Custom"==v&&(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-oxtari",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-xs",children:"Port"}),(0,s.jsx)("input",{type:"text",name:"Port",value:C,onChange:e=>k(e.target.value),placeholder:"Port",className:"grow bg-button-oxtari text-text-alt-oxtari hover:text-text-oxtari w-full",autoComplete:"port"})]})]}),(0,s.jsxs)("label",{className:"input flex items-center gap-2 border-none shadow-md bg-bg-oxtari mt-4",children:[(0,s.jsx)(i.q2z,{className:"text-text-alt-oxtari"}),(0,s.jsx)("input",{type:"password",name:"current-password",value:_,onChange:e=>S(e.target.value),placeholder:"API Key",className:"grow bg-button-oxtari text-text-alt-oxtari hover:text-text-oxtari w-full",autoComplete:"current-password"})]}),(0,s.jsx)("div",{className:"flex justify-between gap-4 mt-4",children:(0,s.jsx)("div",{className:"flex flex-col w-full gap-2",children:(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-2 w-full",children:[(0,s.jsx)(N,{Icon:eL.y4s,title:"Connect to Weaviate",type:"submit",selected:!0,selected_color:"bg-primary-oxtari",loading:m}),"Weaviate"==v&&(0,s.jsx)(N,{Icon:eR.$Wy,title:"Register",type:"button",disabled:m,onClick:()=>window.open("https://console.weaviate.cloud","_blank")}),(0,s.jsx)(N,{Icon:i.asE,title:"Back",type:"button",text_size:"text-xs",icon_size:12,onClick:()=>p(!0),disabled:m})]})})})]})})}),b&&(0,s.jsx)("div",{className:"bg-warning-oxtari p-4 rounded w-full h-full overflow-auto",children:(0,s.jsx)("p",{className:"flex w-full h-full whitespace-pre-wrap",children:b})})]})})]})})},ez=l(26615),eG=e=>{let{RAGConfig:t,setRAGConfig:l,addStatusMessage:n,onSave:o,credentials:i,onReset:c,production:d}=e,x=(e,t,s)=>{l(l=>{if(l){let a={...l};return"string"==typeof s||"boolean"==typeof s?a[e].components[a[e].selected].config[t].value=s:a[e].components[a[e].selected].config[t].values=s,a}return l})},u=(e,t)=>{l(l=>{if(l){let s={...l};return s[e].selected=t,s}return l})},m=(0,a.useCallback)(async(e,s,a)=>{if(!t)return;n("Saving "+s+" Config","SUCCESS");let r=JSON.parse(JSON.stringify(t));r[e].selected=s,r[e].components[s]=a,await A(r,i)&&l(r)},[t,i]);return t?(0,s.jsxs)("div",{className:"flex flex-col justify-start rounded-2xl w-full p-4 ",children:[(0,s.jsx)("div",{className:"sticky flex flex-col gap-2 w-full top-0 z-20 justify-end",children:(0,s.jsxs)("div",{className:"flex justify-end w-full gap-2 p-4 bg-bg-alt-oxtari rounded-lg",children:[(0,s.jsx)(N,{Icon:r.zfW,title:"Save Config",onClick:o,disabled:"Demo"==d}),(0,s.jsx)(N,{Icon:X.B4e,title:"Reset",onClick:c,disabled:"Demo"==d})]})}),(0,s.jsxs)("div",{className:"flex flex-col justify-start gap-3 rounded-2xl w-full p-6 ",children:[(0,s.jsx)(eO,{RAGConfig:t,component_name:"Embedder",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,s.jsx)(eO,{RAGConfig:t,component_name:"Generator",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d}),(0,s.jsx)(eO,{RAGConfig:t,component_name:"Retriever",selectComponent:u,updateConfig:x,saveComponentConfig:m,blocked:"Demo"==d})]})]}):(0,s.jsx)("div",{})},eJ=e=>{let{message:t,selectedTheme:l,selectedDocument:a,setSelectedDocument:n,message_index:o,setSelectedDocumentScore:c,setSelectedChunkScore:d}=e;return"string"==typeof t.content?(0,s.jsx)("div",{className:"flex items-end gap-2 ".concat("user"===t.type?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex flex-col items-start p-5 rounded-3xl animate-press-in text-sm lg:text-base ".concat({user:"bg-bg-oxtari",system:"bg-bg-alt-oxtari",error:"bg-warning-oxtari",retrieval:"bg-bg-oxtari"}[t.type]),children:[t.cached&&(0,s.jsx)(i.i1q,{size:12,className:"text-text-oxtari"}),"system"===t.type&&(0,s.jsx)(ex.D,{className:"prose md:prose-sm lg:prose-base p-3 prose-pre:bg-bg-alt-oxtari",components:{code(e){let{node:t,inline:a,className:n,children:r,...o}=e,i=/language-(\w+)/.exec(n||"");return!a&&i?(0,s.jsx)(eu.Z,{style:"dark"===l.theme?em.vk:em.Yn,language:i[1],PreTag:"div",...o,children:String(r).replace(/\n$/,"")}):(0,s.jsx)("code",{className:n,...o,children:r})}},children:t.content}),"user"===t.type&&(0,s.jsx)("div",{className:"whitespace-pre-wrap",children:t.content}),"error"===t.type&&(0,s.jsxs)("div",{className:"whitespace-pre-wrap flex items-center gap-2 text-sm text-text-oxtari",children:[(0,s.jsx)(ez.I2T,{size:15}),(0,s.jsx)("p",{children:t.content})]})]})}):(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 w-full items-center",children:[t.content.map((e,t)=>(0,s.jsx)("button",{onClick:()=>{n(e.uuid),c(e.uuid+e.score+e.chunks.length),d(e.chunks)},className:"flex ".concat(a&&a===e.uuid+e.score+e.chunks.length?"bg-secondary-oxtari hover:bg-button-hover-oxtari":"bg-button-oxtari hover:bg-secondary-oxtari"," rounded-3xl p-3 items-center justify-between transition-colors duration-300 ease-in-out border-none"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("p",{className:"text-xs flex-grow truncate mr-2",title:e.title,children:e.title}),(0,s.jsxs)("div",{className:"flex gap-1 items-center text-text-oxtari flex-shrink-0",children:[(0,s.jsx)(r.$Kz,{size:12}),(0,s.jsx)("p",{className:"text-sm",children:e.chunks.length})]})]})},"Retrieval"+e.title+t)),(0,s.jsx)(N,{Icon:r.s59,className:"btn-sm btn-square",onClick:()=>document.getElementById("context-modal-"+o).showModal()}),(0,s.jsx)("dialog",{id:"context-modal-"+o,className:"modal",children:(0,s.jsxs)("div",{className:"modal-box",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Context"}),(0,s.jsx)("p",{className:"py-4",children:t.context}),(0,s.jsx)("div",{className:"modal-action",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)("button",{className:"btn focus:outline-none text-text-alt-oxtari bg-button-oxtari hover:bg-button-hover-oxtari hover:text-text-oxtari border-none shadow-none",children:(0,s.jsx)("p",{children:"Close"})})})})]})})]})},eW=e=>{let{production:t,credentials:l,setSelectedDocument:n,setSelectedChunkScore:c,currentPage:d,RAGConfig:x,selectedTheme:u,setRAGConfig:m,addStatusMessage:f,documentFilter:g,setDocumentFilter:p}=e,[b,h]=(0,a.useState)("Chat"),j=(0,a.useRef)(!1),[w,y]=(0,a.useState)("DONE"),[_,S]=(0,a.useState)(""),[C,k]=(0,a.useState)(null),[I,E]=(0,a.useState)(!1),[R,D]=(0,a.useState)(!1),[T,F]=(0,a.useState)([]),[z,G]=(0,a.useState)([]),[J,W]=(0,a.useState)([]),[U,B]=(0,a.useState)(null),[V,q]=(0,a.useState)(0),[Y,K]=(0,a.useState)(""),[$,Q]=(0,a.useState)([]),[ee,et]=(0,a.useState)(!1),el=x?x.Embedder.components[x.Embedder.selected].config.Model.value:"No Config found";(0,a.useState)("No Embedding Model"),(0,a.useEffect)(()=>{D(!0)},[]),(0,a.useEffect)(()=>{x?ei():q(0)},[el,d,g]),(0,a.useEffect)(()=>{Q(e=>0===e.length?[{type:"system",content:u.intro_message.text}]:e)},[u.intro_message.text]),(0,a.useEffect)(()=>{let e=v(),t=new WebSocket(e);return t.onopen=()=>{console.log("WebSocket connection opened to "+e),E(!0)},t.onmessage=e=>{let t;if(!j.current){S("");return}try{t=JSON.parse(e.data)}catch(t){console.error("Received data is not valid JSON:",e.data);return}let l=t.message;if(S(e=>e+l),"stop"===t.finish_reason){j.current=!1,y("DONE"),f("Finished generation","SUCCESS");let e=t.full_text;if(t.cached){let l=t.distance;Q(t=>[...t,{type:"system",content:e,cached:!0,distance:l}])}else Q(t=>[...t,{type:"system",content:e}]);S("")}},t.onerror=e=>{console.error("WebSocket Error:",e),E(!1),j.current=!1,y("DONE"),D(e=>!e)},t.onclose=e=>{e.wasClean?console.log("WebSocket connection closed cleanly, code=".concat(e.code,", reason=").concat(e.reason)):console.error("WebSocket connection died"),E(!1),j.current=!1,y("DONE"),D(e=>!e)},k(t),()=>{t.readyState!==WebSocket.CLOSED&&t.close()}},[R]),(0,a.useEffect)(()=>{x?ei():q(0)},[x]);let es=async()=>{let e=await O(l);e?m(e.rag_config):f("Failed to fetch RAG Config","ERROR")},ea=async()=>{if(!j.current&&Y.trim()){K(""),j.current=!0,F([]),y("CHUNKS"),Q(e=>[...e,{type:"user",content:Y}]);try{f("Sending query...","INFO");let e=await M(Y,x,J,g,l);!e||e.error?en(e?e.error:"No data received"):er(e,Y)}catch(e){en("Failed to fetch from API"),console.error("Failed to fetch from API:",e)}}},en=e=>{f("Query failed","ERROR"),Q(t=>[...t,{type:"error",content:e}]),j.current=!1,y("DONE")},er=(e,t)=>{if(Q(t=>[...t,{type:"retrieval",content:e.documents,context:e.context}]),f("Received "+Object.entries(e.documents).length+" documents","SUCCESS"),e.documents.length>0){let l=e.documents[0];n(l.uuid),B("".concat(l.uuid).concat(l.score).concat(l.chunks.length)),c(l.chunks),e.context&&(eo(t,e.context),y("RESPONSE"))}else en("We couldn't find any chunks to your query")},eo=(e,t)=>{if((null==C?void 0:C.readyState)===WebSocket.OPEN){let l=JSON.stringify({query:e,context:t,conversation:$.slice(1).filter(e=>"user"===e.type||"system"===e.type).map(e=>({type:e.type,content:e.content})),rag_config:x});C.send(l)}else console.error("WebSocket is not open. ReadyState:",null==C?void 0:C.readyState)},ei=async()=>{try{let e=await L(el,g,l),t=await P(l);e&&q(e.datacount),t&&G(t.labels)}catch(e){console.error("Failed to fetch from API:",e),f("Failed to fetch datacount: "+e,"ERROR")}},ec=async()=>{f("Saved Config","SUCCESS"),await A(x,l)},ed=async()=>{f("Reset Config","WARNING"),es()},ex=async()=>{if(x&&x.Retriever.components[x.Retriever.selected].config.Suggestion.value){let e=await H(Y,3,l);e&&F(e.suggestions)}};return(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:[(0,s.jsx)("div",{className:"hidden md:flex gap-2 justify-start items-center",children:(0,s.jsx)(Z,{tooltip_text:"Use the Chat interface to interact with your data and perform Retrieval Augmented Generation (RAG). This interface allows you to ask questions, analyze sources, and generate responses based on your stored documents.",display_text:"Chat"})}),(0,s.jsxs)("div",{className:"w-full md:w-fit flex gap-3 justify-end items-center",children:[(0,s.jsx)(N,{title:"Chat",Icon:r.utr,onClick:()=>{h("Chat")},selected:"Chat"===b,disabled:!1,selected_color:"bg-secondary-oxtari"}),"Demo"!=t&&(0,s.jsx)(N,{title:"Config",Icon:i.KOq,onClick:()=>{h("Config")},selected:"Config"===b,disabled:!1,selected_color:"bg-secondary-oxtari"})]})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex flex-col h-[50vh] md:h-full w-full overflow-y-auto overflow-x-hidden relative",children:["Chat"==b&&(0,s.jsxs)("div",{className:"sticky flex flex-col gap-2 top-0 z-9 p-4 backdrop-blur-sm bg-opacity-30 bg-bg-alt-oxtari rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 justify-start items-center",children:[(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)("div",{className:"dropdown dropdown-hover",children:[(0,s.jsx)("label",{tabIndex:0,children:(0,s.jsx)(N,{title:"Label",className:"btn-sm min-w-min",icon_size:12,text_class_name:"text-xs",Icon:o.Lgw,selected:!1,disabled:!1})}),(0,s.jsx)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",children:z.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{onClick:()=>{J.includes(e)||W([...J,e]);let t=document.activeElement;t.blur();let l=t.closest(".dropdown");l&&l.blur()},children:e})},"Label"+t))})]})}),(J.length>0||g.length>0)&&(0,s.jsx)(N,{onClick:()=>{W([]),p([])},title:"Clear",className:"btn-sm max-w-min",icon_size:12,text_class_name:"text-xs",Icon:X.B4e,selected:!1,disabled:!1})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[J.map((e,t)=>(0,s.jsx)(N,{title:e,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-primary-oxtari",selected:!0,text_class_name:"truncate max-w-[200px]",text_size:"text-xs",onClick:()=>{W(J.filter(t=>t!==e))}},"FilterLabel"+t)),g.map((e,t)=>(0,s.jsx)(N,{title:e.title,Icon:X.B4e,className:"btn-sm min-w-min max-w-[200px]",icon_size:12,selected_color:"bg-secondary-oxtari",selected:!0,text_size:"text-xs",text_class_name:"truncate md:max-w-[100px] lg:max-w-[150px]",onClick:()=>{p(g.filter(t=>t.uuid!==e.uuid))}},"DocumentFilter"+t))]})]}),(0,s.jsxs)("div",{className:"".concat("Chat"===b?"flex flex-col gap-3 p-4":"hidden"),children:[(0,s.jsxs)("div",{className:"flex w-full justify-start items-center text-text-alt-oxtari gap-2",children:[0===V&&(0,s.jsx)(ez.I2T,{size:15}),0===V&&(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm items-center flex",children:"".concat(V," documents embedded by ").concat(el)})]}),$.map((e,t)=>(0,s.jsx)("div",{className:"".concat("user"===e.type?"text-right":""),children:(0,s.jsx)(eJ,{message:e,message_index:t,selectedTheme:u,selectedDocument:U,setSelectedDocumentScore:B,setSelectedDocument:n,setSelectedChunkScore:c})},"Message_"+t)),_&&(0,s.jsx)(eJ,{message:{type:"system",content:_,cached:!1},message_index:-1,selectedTheme:u,selectedDocument:U,setSelectedDocumentScore:B,setSelectedDocument:n,setSelectedChunkScore:c}),j.current&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-text-alt-oxtari loading loading-dots loading-md"}),(0,s.jsxs)("p",{className:"text-text-alt-oxtari",children:["CHUNKS"===w&&"Retrieving...","RESPONSE"===w&&"Generating..."]}),(0,s.jsx)("button",{onClick:()=>{y("DONE"),j.current=!1},className:"btn btn-circle btn-sm bg-bg-alt-oxtari hover:bg-warning-oxtari hover:text-text-oxtari text-text-alt-oxtari shadow-none border-none text-sm",children:(0,s.jsx)(X.B4e,{size:15})})]})})]}),"Config"===b&&(0,s.jsx)(eG,{addStatusMessage:f,production:t,RAGConfig:x,credentials:l,setRAGConfig:m,onReset:ed,onSave:ec})]}),(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-6 items-center justify-end h-min w-full",children:I?(0,s.jsxs)("div",{className:"flex gap-2 items-center justify-end w-full relative",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("textarea",{className:"textarea textarea-bordered w-full bg-bg-oxtari placeholder-text-alt-verb min-h min-h-[40px] max-h-[150px] overflow-y-auto",placeholder:V>0?V>=100?"Chatting with more than 100 documents...":"Chatting with ".concat(V," documents..."):"No documents detected...",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||ee||(e.preventDefault(),ea())},onCompositionStart:()=>{et(!0)},onCompositionEnd:()=>{et(!1)},value:Y,onChange:e=>{let t=e.target.value;K(t),(t.length-1)%3==0&&ex()}}),T.length>0&&(0,s.jsx)("ul",{className:"absolute flex gap-2 justify-between top-full left-0 w-full mt-2 z-10 max-h-40 overflow-y-auto",children:T.map((e,t)=>(0,s.jsx)("li",{className:"p-3 bg-button-oxtari hover:bg-secondary-oxtari text-text-alt-oxtari rounded-xl w-full hover:text-text-oxtari cursor-pointer",onClick:()=>{K(e.query),F([])},children:(0,s.jsx)("p",{className:"text-xs lg:text-sm",children:e.query.length>50?e.query.substring(0,50)+"...":e.query.split(RegExp("(".concat(Y,")"),"gi")).map((e,t)=>e.toLowerCase()===Y.toLowerCase()?(0,s.jsx)("strong",{children:e},t):e)})},t))})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,s.jsx)(N,{type:"button",Icon:o.OUD,onClick:()=>{ea()},disabled:!1,selected_color:"bg-primary-oxtari"}),(0,s.jsx)(N,{type:"button",Icon:X.Ffb,onClick:()=>{n(null),c([]),K(""),B(null),F([]),Q([{type:"system",content:u.intro_message.text}])},disabled:!1,selected_color:"bg-primary-oxtari"})]})]}):(0,s.jsx)("div",{className:"flex gap-2 items-center justify-end w-full",children:(0,s.jsxs)("button",{onClick:()=>{D(e=>!e)},className:"flex btn border-none text-text-oxtari bg-button-oxtari hover:bg-button-hover-oxtari gap-2 items-center",children:[(0,s.jsx)(ep.Nwf,{size:15}),(0,s.jsx)("p",{children:"Reconnecting..."}),(0,s.jsx)("span",{className:"loading loading-spinner loading-xs"})]})})})]})},eU=e=>{let{credentials:t,selectedTheme:l,addStatusMessage:n,production:r,currentPage:o,RAGConfig:i,setRAGConfig:c,documentFilter:d,setDocumentFilter:x}=e,[u,m]=(0,a.useState)(null),[f,g]=(0,a.useState)([]);return(0,s.jsxs)("div",{className:"flex md:flex-row flex-col justify-center gap-3 h-[50vh] md:h-[80vh] ",children:[(0,s.jsx)("div",{className:"".concat(u?"hidden md:flex md:w-[45vw]":"w-full md:w-[45vw] md:flex"),children:(0,s.jsx)(eW,{addStatusMessage:n,production:r,credentials:t,selectedTheme:l,setSelectedDocument:m,setSelectedChunkScore:g,currentPage:o,RAGConfig:i,setRAGConfig:c,documentFilter:d,setDocumentFilter:x})}),(0,s.jsx)("div",{className:"".concat(u?"md:w-[55vw] w-full flex":"hidden md:flex md:w-[55vw]"),children:(0,s.jsx)(ev,{addStatusMessage:n,credentials:t,production:r,documentFilter:d,setDocumentFilter:x,setSelectedDocument:m,selectedTheme:l,selectedDocument:u,chunkScores:f})})]})},eB=l(43326),eV=l(8289),eq=e=>{let{selectedTheme:t,setThemes:l,credentials:n,setSelectedTheme:r,themes:o,addStatusMessage:c}=e,[d,x]=(0,a.useState)(""),u=async()=>{await T(o,t,n),c("Changes to ".concat(t.theme_name," saved"),"SUCCESS")},m=(e,t)=>{r(l=>{let s=l[e];if("text"===s.type)return{...l,[e]:{...s,text:t}};if("image"===s.type)return{...l,[e]:{...s,src:t}};if("check"===s.type)return{...l,[e]:{...s,checked:t}};if("color"===s.type)return{...l,[e]:{...s,color:t}};if("select"===s.type)return{...l,[e]:{...s,value:t}};if("number"===s.type)return{...l,[e]:{...s,value:t}};return l})};(0,a.useEffect)(()=>{l(e=>{let l={...e};return l[t.theme_name]=t,l})},[t]);let f=(e,t)=>{if(t.target.files&&t.target.files[0]){let l=new FileReader;l.onload=t=>{var l;"string"==typeof(null===(l=t.target)||void 0===l?void 0:l.result)&&m(e,t.target.result)},l.readAsDataURL(t.target.files[0])}},g=(e,l)=>(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex gap-3 justify-between items-center text-text-oxtari",children:[(0,s.jsx)("p",{className:"flex min-w-[8vw]",children:l.description}),"text"===l.type&&(0,s.jsx)("label",{className:"input flex items-center gap-2 w-full border-none bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow w-full",placeholder:e,value:t[e].text,onChange:t=>m(e,t.target.value)})}),"select"===l.type&&(0,s.jsx)("select",{value:t[e].value,onChange:t=>{m(e,t.target.value)},className:"select bg-bg-oxtari",children:l.options.map(e=>(0,s.jsx)("option",{value:e,children:e},"Select_"+e))}),"color"===l.type&&(0,s.jsxs)("div",{className:"flex flex-col gap-1 h-[15vh] z-10",children:[(0,s.jsx)("label",{className:"input bg-bg-oxtari input-sm input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:e,value:t[e].color,onChange:t=>{m(e,t.target.value)}})}),(0,s.jsx)(eV.gW,{color:t[e].color,className:"z-1",onChange:t=>{m(e,t)}})]}),"image"===l.type&&(0,s.jsxs)("div",{className:"flex justify-between gap-4 w-full items-center",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsx)("label",{className:"input flex items-center text-text-oxtari gap-2 w-full border-none bg-bg-oxtari",children:(0,s.jsx)("input",{type:"text",className:"grow",placeholder:"Enter image URL",value:d,onChange:e=>x(e.target.value)})})}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(N,{title:"Set Link",onClick:()=>m(e,d)}),(0,s.jsx)(N,{title:"Upload Image",onClick:()=>{var t;return null===(t=document.getElementById("".concat(e,"ImageInput")))||void 0===t?void 0:t.click()}}),(0,s.jsx)("input",{id:"".concat(e,"ImageInput"),type:"file",accept:"image/*",onChange:t=>f(e,t),className:"hidden"})]}),t[e].src&&(0,s.jsx)("img",{src:t[e].src,alt:"".concat(e," preview"),className:"max-w-full max-h-32 rounded-xl"})]})]})]})},e);return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Customize Theme"}),(0,s.jsx)("select",{className:"select bg-bg-oxtari",value:Object.keys(o).find(e=>o[e]===t)||"",onChange:e=>r(o[e.target.value]),children:Object.keys(o).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4",children:[(0,s.jsx)("p",{className:"font-bold",children:"Customize Logo"}),Object.entries(t).filter(e=>{let[t,l]=e;return"image"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Text"}),Object.entries(t).filter(e=>{let[t,l]=e;return"text"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Font"}),Object.entries(t).filter(e=>{let[t,l]=e;return"select"===l.type}).map(e=>{let[t,l]=e;return g(t,l)}),(0,s.jsx)("p",{className:"font-bold mt-4",children:"Customize Color"}),Object.entries(t).filter(e=>{let[t,l]=e;return"color"===l.type}).map(e=>{let[t,l]=e;return g(t,l)})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-3",children:[(0,s.jsx)(N,{title:"Save",onClick:u,className:"max-w-min",Icon:i.FJM}),(0,s.jsx)(N,{title:"Reset",onClick:()=>{l({Light:ey,Dark:e_,Weaviate:eC,WCD:eS}),r(eC),c("Themes reset","SUCCESS")},className:"max-w-min",Icon:X.B4e})]})]})},eH=l(60936),eY=l(15909),eK=e=>{let{credentials:t,addStatusMessage:l}=e,[n,o]=(0,a.useState)(1),[c,d]=(0,a.useState)([]),[x,u]=(0,a.useState)(0),m=async()=>{let e=await K(n,20,t);e&&(d(e.suggestions),u(e.total_count))};(0,a.useEffect)(()=>{m()},[]),(0,a.useEffect)(()=>{m()},[n]);let f=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()},g=e=>{try{let t=(0,eH.D)(e);return(0,eY.Q)(t,{addSuffix:!0})}catch(e){return console.error("Error parsing timestamp:",e),"Invalid date"}},p=async e=>{await Y(e,t),await m(),l("Suggestion deleted","SUCCESS")},b=e=>{navigator.clipboard.writeText(e).then(()=>{console.log("Copied to clipboard")})};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold",children:["Manage Suggestions (",x,")"]}),(0,s.jsx)(N,{title:"Refresh",className:"max-w-min",onClick:()=>{m()},Icon:r.A$d})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsx)("div",{className:"gap-4 flex flex-col p-4 text-text-oxtari",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 p-4 border-2 bg-bg-alt-oxtari rounded-xl",children:[(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 w-2/3",children:[(0,s.jsx)("p",{className:"font-bold flex text-xs text-start text-text-alt-oxtari",children:g(e.timestamp)}),(0,s.jsx)("p",{className:"text-sm text-text-oxtari truncate max-w-full",title:e.query,children:e.query})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(N,{onClick:()=>b(e.query),Icon:r.On2}),(0,s.jsx)(N,{onClick:()=>f("remove_suggestion"+e.uuid),Icon:r.VOs})]}),(0,s.jsx)($,{modal_id:"remove_suggestion"+e.uuid,title:"Remove Suggestion",text:"Do you want to remove this suggestion?",triggerString:"Delete",triggerValue:e.uuid,triggerAccept:p})]},"Suggestion"+e.uuid))})})}),c.length>0&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2 p-3 bg-bg-alt-oxtari",children:[(0,s.jsx)(N,{title:"Previous Page",onClick:()=>{1==n?o(1):o(e=>e-1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.O18}),(0,s.jsxs)("p",{className:"text-xs flex text-text-oxtari",children:["Page ",n]}),(0,s.jsx)(N,{title:"Next Page",onClick:()=>{20*n<=x?o(e=>e+1):o(1)},className:"btn-sm min-w-min max-w-[200px]",text_class_name:"text-xs",Icon:i.Rdr})]})]})},eX=e=>{let{credentials:t,addStatusMessage:l}=e,[n,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),m=async()=>{d(!0);let e=await q(t);(null==e?void 0:e.error)===""&&(o(e.node_payload),u(e.collection_payload)),d(!1)};(0,a.useEffect)(()=>{d(!0),m(),d(!1)},[]);let f=async()=>{await V("DOCUMENTS",t)?(l("All documents reset","SUCCESS"),m()):l("Failed to reset documents","ERROR")},g=async()=>{await V("ALL",t)?(l("Application reset","SUCCESS"),m()):l("Failed to reset application","ERROR")},p=async()=>{await V("CONFIG",t)?(l("Config reset","SUCCESS"),m()):l("Failed to reset config","ERROR")},b=async()=>{await V("SUGGESTIONS",t)?(l("Suggestions reset","SUCCESS"),m()):l("Failed to reset suggestions","ERROR")},h=e=>{let t=document.getElementById(e);t instanceof HTMLDialogElement&&t.showModal()};return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Admin Panel"}),(0,s.jsx)(N,{title:"Refresh",loading:c,onClick:m,className:"max-w-min",Icon:r.A$d})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,s.jsxs)("div",{className:"gap-4 flex flex-col p-4 text-text-oxtari",children:[(0,s.jsx)("p",{className:"font-bold text-lg",children:"Resetting Oxtari"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-between",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(N,{title:"Clear Documents",onClick:()=>h("reset-documents"),Icon:r.emU}),(0,s.jsx)(N,{title:"Clear Config",onClick:()=>h("reset-configs"),Icon:i.LDL}),(0,s.jsx)(N,{title:"Clear Everything",onClick:()=>h("reset-oxtari"),Icon:r.VOs}),(0,s.jsx)(N,{title:"Clear Suggestions",onClick:()=>h("reset-suggestions"),Icon:r.VOs})]})}),(0,s.jsx)("p",{className:"font-bold text-lg",children:"Weaviate Information"}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-oxtari shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-oxtari",children:"Connected to"}),(0,s.jsx)("p",{className:"   text-text-oxtari",children:t.url})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-bg-oxtari shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-oxtari",children:"Deployment"}),(0,s.jsx)("p",{className:" text-text-oxtari",children:t.deployment})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 gap-2 border-secondary-oxtari shadow-sm p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm lg:text-base font-semibold text-text-alt-oxtari",children:"Version"}),n?(0,s.jsx)("p",{className:"text-text-oxtari",children:n.weaviate_version}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-oxtari shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm lg:text-base font-semibold",children:"Nodes"}),n?(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm lg:text-base font-semibold",children:n.node_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),n?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:n.nodes.map(e=>(0,s.jsxs)("li",{className:"text-sm text-text-oxtari flex justify-between",children:[(0,s.jsx)("span",{className:"w-64 truncate",children:e.name}),(0,s.jsxs)("span",{children:["(",e.status," - ",e.shards," shards)"]})]},"Node"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]}),(0,s.jsxs)("div",{className:"flex flex-col border-2 border-bg-oxtari shadow-sm p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm lg:text-base font-semibold",children:"Collections"}),x?(0,s.jsx)("p",{className:"text-text-alt-oxtari text-sm lg:text-base font-semibold",children:x.collection_count}):(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"})]}),x?(0,s.jsx)("ul",{className:"flex flex-col mt-2 list-disc list-inside",children:x.collections.map(e=>(0,s.jsxs)("li",{className:"text-sm text-text-oxtari flex justify-between",children:[(0,s.jsx)("span",{className:"w-128 truncate",children:e.name}),(0,s.jsxs)("span",{children:[e.count," objects"]})]},"Collection"+e.name))}):(0,s.jsx)("span",{className:"loading loading-dots loading-sm mt-2"})]})]})}),(0,s.jsx)($,{modal_id:"reset-documents",title:"Reset Documents",text:"Are you sure you want to reset all documents? This will clear all documents and chunks from Oxtari.",triggerAccept:f,triggerString:"Reset"}),(0,s.jsx)($,{modal_id:"reset-configs",title:"Reset Config",text:"Are you sure you want to reset the config?",triggerAccept:p,triggerString:"Reset"}),(0,s.jsx)($,{modal_id:"reset-oxtari",title:"Reset Oxtari",text:"Are you sure you want to reset Oxtari? This will delete all collections related to Oxtari.",triggerAccept:g,triggerString:"Reset"}),(0,s.jsx)($,{modal_id:"reset-suggestions",title:"Reset Suggestions",text:"Are you sure you want to reset all autocomplete suggestions?",triggerAccept:b,triggerString:"Reset"})]})},eZ=e=>{let{selectedTheme:t,themes:l,setThemes:n,addStatusMessage:o,setSelectedTheme:c,credentials:d}=e,[x,u]=(0,a.useState)("INFO");return(0,s.jsxs)("div",{className:"flex justify-center gap-3 h-[80vh] ",children:[(0,s.jsx)("div",{className:"w-1/3 flex",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsx)("div",{className:"bg-bg-alt-oxtari rounded-2xl flex gap-2 p-3 items-center justify-between h-min w-full",children:(0,s.jsx)("div",{className:"flex gap-2 justify-start ",children:(0,s.jsx)(Z,{tooltip_text:"Customize Theme, reset collections, logout or report issues.",display_text:"Settings"})})}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari gap-2 rounded-2xl flex flex-col p-3 w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsx)(N,{title:"Admin",onClick:()=>u("INFO"),selected:"INFO"===x,selected_color:"bg-secondary-oxtari",Icon:eB.Xn2}),(0,s.jsx)(N,{title:"Customize Theme",onClick:()=>u("THEME"),selected:"THEME"===x,selected_color:"bg-secondary-oxtari",Icon:i._TT}),(0,s.jsx)(N,{title:"Manage Suggestions",onClick:()=>u("SUGGESTIONS"),selected:"SUGGESTIONS"===x,selected_color:"bg-secondary-oxtari",Icon:r.aTL})]}),(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari gap-2 rounded-2xl flex flex-col p-6 w-full overflow-y-auto overflow-x-hidden",children:[(0,s.jsx)(N,{title:"Logout",onClick:()=>window.location.reload(),Icon:r.p$f}),(0,s.jsx)(N,{title:"Report Issue",onClick:()=>window.open("https://github.com/weaviate/Oxtari/issues/new/choose","_blank"),Icon:ez.N3m})]})]})}),(0,s.jsx)("div",{className:"w-2/3 flex",children:(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,s.jsxs)("div",{className:"bg-bg-alt-oxtari gap-2 rounded-2xl flex flex-col p-6 h-full w-full overflow-y-auto overflow-x-hidden",children:["THEME"===x&&(0,s.jsx)(eq,{themes:l,credentials:d,setThemes:n,setSelectedTheme:c,selectedTheme:t,addStatusMessage:o}),"INFO"===x&&(0,s.jsx)(eX,{addStatusMessage:o,credentials:d}),"SUGGESTIONS"===x&&(0,s.jsx)(eK,{credentials:d,addStatusMessage:o})]})})})]})},e$=e=>{let{addStatusMessage:t}=e,l=(0,a.useRef)(null),[n,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=localStorage.getItem("getting_started");(!e||"false"===e)&&(o(!0),l.current&&l.current.showModal())},[]),n)?(0,s.jsx)("dialog",{id:"Getting-Started-Modal",className:"modal",ref:l,children:(0,s.jsxs)("div",{className:"modal-box w-11/12 max-w-5xl",children:[(0,s.jsx)("div",{className:"hero",children:(0,s.jsxs)("div",{className:"hero-content flex-row",children:[(0,s.jsxs)("div",{className:"text-center lg:text-left",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-5xl font-bold",children:"Welcome to Oxtari"}),(0,s.jsx)("h2",{className:"text-lg md:text-2xl mt-2",children:"Your Open Source RAG App"}),(0,s.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Oxtari is an open-source application designed to offer an end-to-end, streamlined, and user-friendly interface for Retrieval-Augmented Generation (RAG) out of the box. In just a few easy steps, explore your datasets and extract insights with ease, either locally with HuggingFace and Ollama or through LLM providers such as Anthrophic, Cohere, and OpenAI."}),(0,s.jsx)("p",{className:"py-6 text-sm md:text-base",children:"Learn more by visiting our GitHub repository, our blog post, or our video on Oxtari. Oxtari is currently still in development. If you have any questions or find issues, please reach out to us on GitHub."}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,s.jsx)(N,{title:"GitHub",Icon:i.hJX,onClick:()=>window.open("https://github.com/weaviate/oxtari","_blank")}),(0,s.jsx)(N,{title:"YouTube",Icon:i.V2E,onClick:()=>window.open("https://www.youtube.com/watch?v=swKKRdLBhas","_blank")}),(0,s.jsx)(N,{title:"Blog Post",Icon:r.kaV,onClick:()=>window.open("https://weaviate.io/blog/oxtari-open-source-rag-app","_blank")})]})]}),(0,s.jsx)("div",{className:"hidden md:block shrink-0",children:(0,s.jsx)("img",{src:"https://raw.githubusercontent.com/weaviate/Oxtari/main/img/thumbnail.png",alt:"Oxtari AI",width:400,className:"rounded-lg shadow-2xl"})})]})}),(0,s.jsx)("div",{className:"modal-action mt-6 justify-center md:justify-end",children:(0,s.jsx)("form",{method:"dialog",children:(0,s.jsx)(N,{title:"Let's get started",type:"submit",selected:!0,onClick:()=>{localStorage.setItem("getting_started","true"),o(!1),t("Achievement unlocked: Welcome to Oxtari!","SUCCESS")},selected_color:"bg-primary-oxtari",Icon:i.$0H})})})]})}):null},eQ=l(48614),e0=l(90988),e2=l(21151),e1=e=>{let{status_messages:t,set_status_messages:l}=e,[n,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{t.length>0&&(o(e=>[...e,...t]),l([]));let e=setInterval(()=>{let e=new Date().getTime();o(t=>t.filter(t=>e-new Date(t.timestamp).getTime()<5e3))},1e3);return()=>clearInterval(e)},[t,l]);let i=e=>{switch(e){case"INFO":default:return"bg-button-oxtari";case"WARNING":return"bg-secondary-oxtari";case"SUCCESS":return"bg-primary-oxtari";case"ERROR":return"bg-warning-oxtari"}},c=e=>{switch(e){case"INFO":default:return(0,s.jsx)(ez.hCA,{size:15});case"WARNING":return(0,s.jsx)(r.OvZ,{size:15});case"SUCCESS":return(0,s.jsx)(e2.vuX,{size:15});case"ERROR":return(0,s.jsx)(ez.yZ3,{size:15})}};return(0,s.jsx)("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:(0,s.jsx)(eQ.M,{children:n.filter(e=>{let t=new Date(e.timestamp).getTime();return new Date().getTime()-t<5e3}).map((e,t)=>(0,s.jsx)(e0.E.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"".concat(i(e.type)," text-text-oxtari p-4 min-w-[300px] rounded-lg z-10 shadow-md"),children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[c(e.type),(0,s.jsx)("p",{className:"text-xs font-bold",children:e.type})]}),(0,s.jsx)("p",{className:"text-base",children:e.message})]})},t))})})};function e3(){var e;let[t,l]=(0,a.useState)("CHAT"),[r,o]=(0,a.useState)("Local"),[i,c]=(0,a.useState)(""),[d,x]=(0,a.useState)({Light:ey,Dark:e_,Weaviate:eC,WCD:eS}),[u,m]=(0,a.useState)(d.Weaviate),f=u.font.value,g=f&&(null===(e=h[f])||void 0===e?void 0:e.className)||"",[p,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[y,_]=(0,a.useState)({deployment:"Local",url:"",key:"",default_deployment:""}),[S,k]=(0,a.useState)(null),[I,E]=(0,a.useState)([]),[D,O]=(0,a.useState)([]),A=(0,a.useCallback)(async()=>{try{let[e]=await Promise.all([R()]);e?(o(e.production),c(e.gtag),b(!0),_({deployment:"Local",url:e.deployments.WEAVIATE_URL_VERBA,key:e.deployments.WEAVIATE_API_KEY_VERBA,default_deployment:e.default_deployment})):(console.warn("Could not retrieve health data"),b(!1),j(!1))}catch(e){console.error("Error during initial fetch:",e),b(!1),j(!1)}},[]);(0,a.useEffect)(()=>{A()},[]),(0,a.useEffect)(()=>{if(v){let e=setTimeout(()=>{N(!0)},1e3);return()=>clearTimeout(e)}},[v]);let T=(0,a.useCallback)(()=>{var e,t,l,s,a,n,r,o,i,c,d;Object.entries({"--primary-oxtari":(null===(e=u.primary_color)||void 0===e?void 0:e.color)||eC.primary_color.color,"--secondary-oxtari":(null===(t=u.secondary_color)||void 0===t?void 0:t.color)||eC.secondary_color.color,"--warning-oxtari":(null===(l=u.warning_color)||void 0===l?void 0:l.color)||eC.warning_color.color,"--bg-oxtari":(null===(s=u.bg_color)||void 0===s?void 0:s.color)||eC.bg_color.color,"--bg-alt-oxtari":(null===(a=u.bg_alt_color)||void 0===a?void 0:a.color)||eC.bg_alt_color.color,"--text-oxtari":(null===(n=u.text_color)||void 0===n?void 0:n.color)||eC.text_color.color,"--text-alt-oxtari":(null===(r=u.text_alt_color)||void 0===r?void 0:r.color)||eC.text_alt_color.color,"--button-oxtari":(null===(o=u.button_color)||void 0===o?void 0:o.color)||eC.button_color.color,"--button-hover-oxtari":(null===(i=u.button_hover_color)||void 0===i?void 0:i.color)||eC.button_hover_color.color,"--text-oxtari-button":(null===(c=u.button_text_color)||void 0===c?void 0:c.color)||eC.button_text_color.color,"--text-alt-oxtari-button":(null===(d=u.button_text_alt_color)||void 0===d?void 0:d.color)||eC.button_text_alt_color.color}).forEach(e=>{let[t,l]=e;document.documentElement.style.setProperty(t,l)})},[u,d]);(0,a.useEffect)(T,[u]);let M=(e,t)=>{O(l=>[...l,{message:e,type:t,timestamp:new Date().toISOString()}])};return(0,s.jsxs)("main",{className:"min-h-screen bg-bg-oxtari text-text-oxtari min-w-screen ".concat(g),"data-theme":u.theme,children:[""!==i&&(0,s.jsx)(n.GoogleAnalytics,{gaId:i}),(0,s.jsx)(e1,{status_messages:D,set_status_messages:O}),!v&&p&&(0,s.jsx)(eP,{production:r,setSelectedTheme:m,setThemes:x,credentials:y,setIsLoggedIn:j,setRAGConfig:k,setCredentials:_}),v&&p&&(0,s.jsxs)("div",{className:"transition-opacity duration-1000 ".concat(w?"opacity-100":"opacity-0"," flex flex-col gap-2 p-5"),children:[(0,s.jsx)(e$,{addStatusMessage:M}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C,{production:r,title:u.title.text,subtitle:u.subtitle.text,imageSrc:u.image.src,version:"v2.0.0",currentPage:t,setCurrentPage:l}),(0,s.jsx)("div",{className:"".concat("CHAT"===t?"":"hidden"),children:(0,s.jsx)(eU,{addStatusMessage:M,credentials:y,RAGConfig:S,setRAGConfig:k,production:r,selectedTheme:u,currentPage:t,documentFilter:I,setDocumentFilter:E})}),"DOCUMENTS"===t&&(0,s.jsx)(ej,{addStatusMessage:M,credentials:y,production:r,selectedTheme:u,documentFilter:I,setDocumentFilter:E}),(0,s.jsx)("div",{className:"".concat("ADD"===t&&"Demo"!=r?"":"hidden"),children:(0,s.jsx)(eM,{RAGConfig:S,setRAGConfig:k,credentials:y,addStatusMessage:M})}),(0,s.jsx)("div",{className:"".concat("SETTINGS"===t&&"Demo"!=r?"":"hidden"),children:(0,s.jsx)(eZ,{credentials:y,addStatusMessage:M,selectedTheme:u,setSelectedTheme:m,themes:d,setThemes:x})})]}),(0,s.jsx)("div",{className:"footer footer-center p-4 mt-8 bg-bg-oxtari text-text-alt-oxtari transition-all duration-1500 delay-1000",children:(0,s.jsx)("aside",{children:(0,s.jsx)("p",{children:"Build with ♥ and Weaviate \xa9 2024"})})})]}),(0,s.jsx)("img",{referrerPolicy:"no-referrer-when-downgrade",src:"https://static.scarf.sh/a.png?x-pxid=ec666e70-aee5-4e87-bc62-0935afae63ac"})]})}}},function(e){e.O(0,[715,689,520,370,465,929,582,400,190,61,652,682,420,306,636,115,887,971,117,744],function(){return e(e.s=56175)}),_N_E=e.O()}]);